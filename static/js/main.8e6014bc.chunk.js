(window["webpackJsonpcdp-frontend"]=window["webpackJsonpcdp-frontend"]||[]).push([[0],{310:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=310},371:function(e,t,n){e.exports=n(688)},376:function(e,t,n){},688:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(45),i=n.n(c),o=(n(376),n(134)),l=n(58),u=n(72),s=n(101),m=n(104),p=n(107),d=n(32);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e){o.a.set(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({page:e},t)),o.a.pageview(e)};return function(t){function r(){return Object(l.a)(this,r),Object(s.a)(this,Object(m.a)(r).apply(this,arguments))}return Object(p.a)(r,t),Object(u.a)(r,[{key:"componentDidMount",value:function(){n(window.location.hash.substr(1))}},{key:"componentDidUpdate",value:function(e){var t=this.props.location.pathname,r=e.location.pathname;t!==r&&n(r)}},{key:"render",value:function(){return a.a.createElement(e,this.props)}}]),r}(r.Component)}var v=n(38),b=n(75),y=n(711),E=n(698),w=n(8),g=w.a.h1({}),O=Object(w.a)("span")({transition:".8s all",borderRadius:"5px",padding:"1rem .5rem",":hover":{backgroundColor:"#F5F5F5",color:"black"}}),j=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(y.a,{vertical:!0},a.a.createElement(E.a,null,a.a.createElement(v.b,{to:"/"},a.a.createElement(g,null,"Council Data Project")))),a.a.createElement(y.a,{vertical:!0},a.a.createElement(E.a,null,a.a.createElement(v.b,{to:"/events"},a.a.createElement(O,null,"Events")),a.a.createElement(v.b,{to:"/people"},a.a.createElement(O,{style:{marginLeft:"10px"}},"People")))))},x=n(708),k=n(710),S=n(704),C=function(){return a.a.createElement(y.a,{inverted:!0,vertical:!0,style:{padding:"5em 0em"}},a.a.createElement(E.a,null,a.a.createElement(x.a,{inverted:!0,stackable:!0},a.a.createElement(x.a.Row,{columns:"equal"},a.a.createElement(x.a.Column,null,a.a.createElement(k.a,{inverted:!0,as:"h4",content:"About"}),a.a.createElement(S.a,{link:!0,inverted:!0},a.a.createElement(S.a.Item,{as:"a"},"The Project"),a.a.createElement(S.a.Item,{as:"a"},"The Team"),a.a.createElement(S.a.Item,{as:"a"},"Other Work"))),a.a.createElement(x.a.Column,null,a.a.createElement(k.a,{inverted:!0,as:"h4",content:"Seattle"}),a.a.createElement(S.a,{link:!0,inverted:!0},a.a.createElement(S.a.Item,{as:"a"},"City of Seattle"),a.a.createElement(S.a.Item,{as:"a"},"Seattle Open Data"),a.a.createElement(S.a.Item,{as:"a"},"Seattle Channel"))),a.a.createElement(x.a.Column,null,a.a.createElement(k.a,{inverted:!0,as:"h4",content:"Developers"}),a.a.createElement(S.a,{link:!0,inverted:!0},a.a.createElement(S.a.Item,{as:"a"},"Council Data Project"),a.a.createElement(S.a.Item,{as:"a"},"Seattle Specific"),a.a.createElement(S.a.Item,{as:"a"},"Transcription Runner")))),a.a.createElement(x.a.Row,null,a.a.createElement("p",null,"This web application is not funded by, nor associated with the Seattle City Council. This is a prototype web application to show the viability of an automated and collaborativly sourced city council transcription service. The transcripts are roughly ninty-percent accurate, and therefore may not represent what was actually said.")))))},P=n(9),_=n.n(P),R=n(20),D=n(23),I=n(699),B=n(690),A=Object(w.a)(E.a)({minHeight:"100vh"}),M=Object(w.a)(E.a)({marginTop:"2em !important",marginBottom:"5em !important"}),T=Object(w.a)(I.a)({width:"50% !important"}),Y=Object(w.a)(x.a)({display:"block",marginTop:"150px !important"}),H=function(e){var t=a.a.useState(""),n=Object(D.a)(t,2),r=n[0],c=n[1],i=function(){var e=Object(R.a)(_.a.mark(function e(t,n){var r;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.value,c(r);case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return a.a.createElement(A,null,a.a.createElement(M,null,a.a.createElement(Y,{verticalAlign:"middle",centered:!0},a.a.createElement(x.a.Row,null,a.a.createElement("h1",null,"Search City Council Transcripts")),a.a.createElement(x.a.Row,null,a.a.createElement(T,{placeholder:"Enter a keyword to search meeting transcripts",value:r,onChange:i,onKeyPress:function(t){"Enter"===t.key&&e.history.push("/search?q=".concat(r))}}),a.a.createElement(B.a,{attached:"right",primary:!0,as:v.b,to:"/search?q=".concat(r)},"Search")))))},N=n(340),F=n.n(N),z=n(702),U=n(706),L=n(39),q=n.n(L),W=function(e){return q.a.utc(e).format("MMMM D, YYYY h:mm A")},Q=Object(w.a)(U.a)({boxShadow:"none !important"}),V=Object(w.a)(U.a.Content)({padding:"0 !important"}),G=function(e){var t=e.name,n=e.date,r=e.description,c=e.link;return a.a.createElement(Q,{fluid:!0},a.a.createElement(V,null,a.a.createElement(U.a.Header,null,a.a.createElement(v.b,{to:c},t)),a.a.createElement(U.a.Meta,null,W(n)),a.a.createElement(U.a.Description,null,r)))},J=a.a.memo(function(e){var t=e.events;return a.a.createElement(U.a.Group,{centered:!0},t.map(function(e){var t=e.name,n=e.date,r=e.description,c=e.id;return a.a.createElement(G,{key:c,name:t,date:n,description:r,link:"/events/".concat(c)})}))}),K=n(703),Z=n(67);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ee(e){return Object.keys(e).filter(function(t){return e[t]})}function te(e){return Object.values(e).some(function(e){return e})}function ne(e,t){if(!e)return!te(t);for(var n,r=0,a=Object.keys(t);r<a.length;r++){if(t[n=a[r]]&&!e.hasOwnProperty(n))return!1;if(t[n]!==e[n]&&e.hasOwnProperty(n))return!1}return!0}var re=function(e,t,n,r){var c=a.a.useState(e),i=Object(D.a)(c,2),o=i[0],l=i[1];return{value:o,set:l,clear:function(){l(function(e){var t=X({},e);return Object.keys(t).forEach(function(e){return t[e]=n}),t})},handleChange:function(e,t){l(function(n){return X({},n,Object(d.a)({},e,t))})},getTextRep:function(){return r(o,t)}}},ae=w.a.div({display:"flex",justifyContent:"space-between",padding:"1em 0"}),ce=Object(w.a)(K.a)({minWidth:"250px !important",maxWidth:"90% !important",boxShadow:"none !important","@media(max-width:500px)":{width:"86% !important"}}),ie=Object(w.a)(K.a.Content)({flexGrow:"1",overflowY:"auto !important"}),oe=w.a.div({maxHeight:"45vh",display:"flex",flexDirection:"column"}),le=a.a.memo(function(e){var t=e.filter,n=e.header,r=e.handlePopupClose,c=e.mountNodeRef,i=e.children,o=t.value,l=t.clear,u=t.getTextRep,s=a.a.useState(!1),m=Object(D.a)(s,2),p=m[0],d=m[1],f=function(){d(!1),r()};return a.a.createElement(ce,{basic:!0,flowing:!0,mountNode:c.current,on:"click",onClose:f,onOpen:function(){d(!0)},open:p,pinned:!0,offset:"0, -5px",position:"bottom left",positionFixed:!0,trigger:a.a.createElement(B.a,{icon:!0,labelPosition:"right",basic:!te(o)},a.a.createElement(Z.a,{name:"angle down"}),u())},a.a.createElement(oe,null,a.a.createElement(k.a,{content:n}),a.a.createElement(ie,null,i),a.a.createElement(ae,null,a.a.createElement(B.a,{size:"mini",onClick:function(){l()}},a.a.createElement(Z.a,{name:"remove"})," Clear"),a.a.createElement(B.a,{size:"mini",primary:!0,onClick:f},a.a.createElement(Z.a,{name:"checkmark"})," Save"))))}),ue=function(e,t){var n=q.a.utc(e.start,"YYYY-MM-DD"),r=q.a.utc(e.end,"YYYY-MM-DD"),a=n.format("MMM D, YYYY"),c=r.format("MMM D, YYYY");return e.start&&e.end?n.year()===r.year()&&n.month()===r.month()?"".concat(a.split(",")[0]," - ").concat(r.date(),", ").concat(r.year()):n.year()===r.year()?"".concat(a.split(",")[0]," - ").concat(c.split(",")[0],", ").concat(r.year()):"".concat(a," - ").concat(c):e.start?"".concat(a," -"):e.end?"- ".concat(c):t},se=a.a.memo(function(e){var t=e.filter,n=t.value,r=t.handleChange,c=function(e,t){var n=t.name,a=t.value;r(n,a)};return a.a.createElement(z.a,null,a.a.createElement(z.a.Field,null,"From"),a.a.createElement(z.a.Input,{fluid:!0,name:"start",type:"date",onChange:c,value:n.start}),a.a.createElement(z.a.Field,null,"To"),a.a.createElement(z.a.Input,{fluid:!0,name:"end",type:"date",onChange:c,value:n.end}))}),me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return-1!==e.toLowerCase().indexOf(t.toLowerCase())},pe=Object(w.a)(z.a.Input)({paddingRight:".8em"}),de=function(e,t){var n=Object.values(e).filter(function(e){return e}).length;return n?"".concat(t," : ").concat(n):t},fe=a.a.memo(function(e){var t=e.filter,n=e.options,r=e.searchCommitteeQuery,c=e.setSearchCommitteeQuery,i=t.value,o=t.handleChange,l=function(e,t){var n=t.name,r=t.checked;o(n,r)},u=n.filter(function(e){var t=e.text;return me(t,r)});return a.a.createElement(z.a,null,a.a.createElement(pe,{placeholder:"Search Committee Names",value:r,onChange:function(e,t){var n=t.value;c(n)}}),u.map(function(e){return a.a.createElement(z.a.Checkbox,{key:e.name,label:e.text,name:e.name,checked:i[e.name],onChange:l})}))}),he=n(86),ve=n.n(he);n(508);function be(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(R.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ge={eq:"==",contains:"array-contains",contains_any:"array-contains-any",in:"in",gt:">",lt:"<",gteq:">=",lteq:"<="},Oe={asc:"asc",desc:"desc"},je=function e(t){Object(l.a)(this,e);var n=new Error("Unsure how to create WhereCondition from received data: ".concat(t));if(t instanceof Array)if(2===t.length)this.columnName=t[0],this.operator=ge.eq,this.value=t[1];else{if(3!==t.length)throw n;if(!Object.values(ge).includes(t[1]))throw new Error("\n                        Unknown WhereCondition operator: ".concat(t[1],"\n                        Allowed WhereCondition operators: ").concat(Object.values(ge),"\n                    "));this.columnName=t[0],this.operator=t[1],this.value=t[2]}else{if(!(t instanceof Object))throw n;if(t.columnName&&t.operator&&t.value){if(!Object.values(ge).includes(t.operator))throw new Error("\n                        Unknown WhereCondition operator: ".concat(t.operator,"\n                        Allowed WhereCondition operators: ").concat(Object.values(ge),"\n                    "));this.columnName=t.columnName,this.operator=t.operator,this.value=t.value}else{if(!t.columnName||!t.value)throw n;this.columnName=t.columnName,this.operator=ge.eq,this.value=t.value}}},xe=function e(t){Object(l.a)(this,e);var n,r=new Error("Unsure how to create OrderCondition from received data: ".concat(t));if("string"===typeof(n=t)||n instanceof String)this.columnName=t,this.operator=Oe.desc;else if(t instanceof Array)if(1===t.length)this.columnName=t[0],this.operator=Oe.desc;else{if(2!==t.length)throw r;if(!Object.values(Oe).includes(t[1]))throw new Error("\n                        Unknown OrderCondition operator: ".concat(t[1],"\n                        Allowed OrderCondition operators: ").concat(Object.values(Oe),"\n                    "));this.columnName=t[0],this.operator=t[1]}else{if(!(t instanceof Object))throw r;if(t.columnName&&t.operator){if(!Object.values(Oe).includes(t.operator))throw new Error("\n                        Unknown OrderCondition operator: ".concat(t.operator,"\n                        Allowed OrderCondition operators: ").concat(Object.values(Oe),"\n                    "));this.columnName=t.columnName,this.operator=t.operator}else{if(!t.columnName)throw r;this.columnName=t.columnName,this.operator=Oe.desc}}},ke=new(function(){function e(t){Object(l.a)(this,e),this.credentials=t,ve.a.initializeApp(this.credentials),this.connection=ve.a.firestore()}return Object(u.a)(e,[{key:"selectRowById",value:function(){var e=Object(R.a)(_.a.mark(function e(t,n){var r;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.connection.collection(t).doc(n).get();case 3:return r=e.sent,e.abrupt("return",r.data());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_unpackQueryResults",value:function(){var e=Object(R.a)(_.a.mark(function e(t){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.forEach(function(e){var t=e.data(),r=we({id:e.id},t);n.push(r)}),e.abrupt("return",n);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"selectRowsAsArray",value:function(){var e=Object(R.a)(_.a.mark(function e(t){var n,r,a,c,i,o=arguments;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:[],r=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:1e3,e.prev=3,c=this.connection.collection(t),n.forEach(function(e){c=c.where(e.columnName,e.operator,e.value)}),r&&(c=c.orderBy(r.columnName,r.operator)),c=c.limit(a),e.next=11,c.get().catch(function(e){throw new Error("Failed to retrieve data from database. Error: ".concat(e))});case 11:return i=e.sent,e.next=14,this._unpackQueryResults(i);case 14:return e.abrupt("return",e.sent);case 17:return e.prev=17,e.t0=e.catch(3),e.abrupt("return",Promise.reject(e.t0));case 20:case 21:case"end":return e.stop()}},e,this,[[3,17]])}));return function(t){return e.apply(this,arguments)}}()}]),e}())({apiKey:"AIzaSyA7aO6weBcOUBZLmxE3aMyn4NeElVEHZUc",authDomain:"cdp-sea.firebaseapp.com",projectId:"cdp-seattle",databaseURL:"https://cdp-sea.firebaseio.com"}),Se=function(e,t){var n,r;if(e.by)switch(e.by){case"name":n="Committee";break;case"date":n="Date";break;case"value":n="Relevance"}e.order&&(r=e.order===Oe.asc?"Ascending":"Descending");var a=t;return a+=n&&r?" by ".concat(n,": ").concat(r):n?" by ".concat(n):r?" ".concat(r):" By"},Ce=a.a.memo(function(e){var t=e.filter,n=e.sortByOptions,r=t.value,c=t.handleChange,i=function(e,t){var n=t.name,r=t.value;c(n,r)};return a.a.createElement(z.a,null,a.a.createElement(z.a.Field,null,"Sort By"),n.map(function(e){return a.a.createElement(z.a.Checkbox,{key:e.value,radio:!0,label:e.label,name:"by",value:e.value,checked:r.by===e.value,onChange:i})}),a.a.createElement(z.a.Field,null,"Sort Order"),a.a.createElement(z.a.Checkbox,{radio:!0,label:"Ascending",name:"order",value:Oe.asc,checked:r.order===Oe.asc,onChange:i}),a.a.createElement(z.a.Checkbox,{radio:!0,label:"Descending",name:"order",value:Oe.desc,checked:r.order===Oe.desc,onChange:i}))}),Pe=(n(689),n(352)),_e=n.n(Pe),Re=n(49);function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Be=ve.a.storage();function Ae(){return Me.apply(this,arguments)}function Me(){return(Me=Object(R.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.selectRowsAsArray("event",[],new xe(["event_datetime",Oe.desc]));case 3:return t=e.sent,e.next=6,nt(t);case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}function Te(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(R.a)(_.a.mark(function e(t,n){var r;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.selectRowsAsArray("event_minutes_item",[new je(["event_id",ge.eq,t])],new xe(["index",n]));case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case 11:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function He(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(R.a)(_.a.mark(function e(t){var n,r;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.selectRowById("minutes_item",t.minutes_item_id);case 3:return n=e.sent,e.next=6,ke.selectRowsAsArray("minutes_item_file",[new je(["minutes_item_id",ge.eq,t.minutes_item_id])],new xe(["name",Oe.asc]));case 6:return r=e.sent,e.abrupt("return",Ie({},t,{minutes_item:Ie({id:t.minutes_item_id},n,{file:r})}));case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 13:case 14:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function Fe(e){return ze.apply(this,arguments)}function ze(){return(ze=Object(R.a)(_.a.mark(function e(t){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.selectRowById("body",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function Ue(e){return Le.apply(this,arguments)}function Le(){return(Le=Object(R.a)(_.a.mark(function e(t){var n,r,a,c,i,o;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.selectRowsAsArray("transcript",[new je(["event_id",ge.eq,t])]);case 3:return n=e.sent,r=Object(D.a)(n,1),a=r[0],e.next=8,ke.selectRowById("file",a.file_id);case 8:return c=e.sent,i=Be.refFromURL(c.uri),e.next=12,i.getDownloadURL().then(function(e){return be(e)});case 12:return o=e.sent,e.abrupt("return",o);case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 19:case"end":return e.stop()}},e,null,[[0,16]])}))).apply(this,arguments)}function qe(e){return We.apply(this,arguments)}function We(){return(We=Object(R.a)(_.a.mark(function e(t){var n,r,a,c,i;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter(function(e){return null!==e.decision}),r=[],n.forEach(function(e){r.push({matter:e.minutes_item.matter,name:e.minutes_item.name,id:e.id,decision:e.decision,index:e.index})}),a=r.map(function(e){return ke.selectRowsAsArray("vote",[new je(["event_minutes_item_id",ge.eq,e.id])])}),e.next=6,Promise.all(a);case 6:return c=e.sent,e.next=9,ke.selectRowsAsArray("person");case 9:return i=e.sent,r.forEach(function(e,t){var n=c[t],r=[];n.forEach(function(e){var t=i.find(function(t){return t.id===e.person_id});r.push({decision:e.decision,person_id:e.person_id,full_name:t.full_name})}),e.formattedIndividualVotes=Object(Re.sortBy)(r,function(e){return e.full_name})}),e.abrupt("return",r);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qe(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(R.a)(_.a.mark(function e(t){var n,r,a,c,i,o;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.selectRowById("event",t);case 3:return n=e.sent,e.next=6,Fe(n.body_id);case 6:return r=e.sent,e.next=9,Te(t,Oe.asc);case 9:return a=e.sent,e.next=12,Promise.all(a.map(function(e){return He(e)}));case 12:return c=e.sent,e.next=15,Ue(t);case 15:return i=e.sent,e.next=18,qe(c);case 18:return o=e.sent,e.abrupt("return",{id:t,name:r.name,description:r.description,videoUrl:n.video_uri,date:q.a.utc(n.event_datetime.toMillis()).toISOString(),minutes:c,transcript:i.data,scPageUrl:n.source_uri,votes:o});case 22:return e.prev=22,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 25:case"end":return e.stop()}},e,null,[[0,22]])}))).apply(this,arguments)}function Ge(e){return Je.apply(this,arguments)}function Je(){return(Je=Object(R.a)(_.a.mark(function e(t){var n,r,a,c,i,o,l,u,s,m=arguments;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]?m[1]:{},r=m.length>2&&void 0!==m[2]?m[2]:[],a=m.length>3&&void 0!==m[3]?m[3]:{},c=0,e.prev=4,_e.a.PorterStemmer.attach(),0!==(i=t.tokenizeAndStem()).length){e.next=9;break}return e.abrupt("return",[]);case 9:return e.next=11,Promise.all(i.map(function(e){return ke.selectRowsAsArray("indexed_event_term",[new je(["term",ge.eq,e])])}));case 11:return o=e.sent,l=Object(Re.mapValues)(Object(Re.groupBy)(Object(Re.flatten)(o),function(e){return e.event_id}),function(e,t){return e.reduce(function(e,t){return Ie({},e,{value:e.value+t.value})},{event_id:t,value:0})}),u=Object(Re.filter)(l,function(e){return e.value>c}),e.next=16,Promise.all(u.map(function(e){var t=e.event_id;return ke.selectRowById("event",t)}));case 16:return s=e.sent,e.next=19,nt(s);case 19:return(s=e.sent).forEach(function(e,t){e.id=u[t].event_id,e.value=u[t].value}),s=ct(s=at(s,n,r),a,!0),e.abrupt("return",s);case 26:return e.prev=26,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0));case 29:case"end":return e.stop()}},e,null,[[4,26]])}))).apply(this,arguments)}function Ke(){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(R.a)(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",ke.selectRowsAsArray("body",[],new xe(["name",Oe.asc])));case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 7:case"end":return e.stop()}},e,null,[[0,4]])}))).apply(this,arguments)}function $e(e,t,n){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(R.a)(_.a.mark(function e(t,n,r){var a,c;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[],n.length?n.forEach(function(e){return a.push(et(t,e))}):a.push(et(t)),e.t0=Re.flatten,e.next=6,Promise.all(a);case 6:return e.t1=e.sent,c=(0,e.t0)(e.t1),e.next=10,nt(c);case 10:return c=ct(c=e.sent,r),e.abrupt("return",c);case 15:return e.prev=15,e.t2=e.catch(0),e.abrupt("return",Promise.reject(e.t2));case 18:case"end":return e.stop()}},e,null,[[0,15]])}))).apply(this,arguments)}function et(e){return tt.apply(this,arguments)}function tt(){return(tt=Object(R.a)(_.a.mark(function e(t){var n,r,a,c,i,o,l=arguments;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:null,r=[],n&&r.push(new je(["body_id",ge.eq,n])),t.start&&(a=q.a.utc(t.start,"YYYY-MM-DD"),c=ve.a.firestore.Timestamp.fromMillis(a.valueOf()),r.push(new je(["event_datetime",ge.gteq,c]))),t.end&&(i=q.a.utc(t.end,"YYYY-MM-DD").add(1,"days").subtract(1,"milliseconds"),o=ve.a.firestore.Timestamp.fromMillis(i.valueOf()),r.push(new je(["event_datetime",ge.lteq,o]))),e.abrupt("return",ke.selectRowsAsArray("event",r));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(R.a)(_.a.mark(function e(t){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke();case 2:return n=e.sent,e.abrupt("return",t.map(function(e){var t=n.find(function(t){return t.id===e.body_id});return{id:e.id,body_id:t.id,name:t.name,description:t.description,date:q.a.utc(e.event_datetime.toMillis()).toISOString()}}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function at(e,t,n){return e.filter(function(e){if(n.length&&-1===n.indexOf(e.body_id))return!1;if(t.start&&q.a.utc(e.date).isBefore(q.a.utc(t.start)))return!1;if(t.end){var r=q.a.utc(t.end,"YYYY-MM-DD").add(1,"days").subtract(1,"milliseconds");if(q.a.utc(e.date).isAfter(r))return!1}return!0})}function ct(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e=t.by&&t.order?Object(Re.orderBy)(e,[t.by],[t.order]):Object(Re.orderBy)(e,[n?"value":"date"],[Oe.desc])}function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function lt(){return ut.apply(this,arguments)}function ut(){return(ut=Object(R.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.selectRowsAsArray("person",[],new xe(["full_name",Oe.asc]));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function st(e){return mt.apply(this,arguments)}function mt(){return(mt=Object(R.a)(_.a.mark(function e(t){var n,r,a,c,i,o,l,u,s,m,p;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,ke.selectRowById("person",t);case 3:return r=e.sent,e.next=6,ke.selectRowsAsArray("vote",[new je(["person_id",ge.eq,t])]);case 6:return a=e.sent,c=a.map(function(e){return ke.selectRowById("event_minutes_item",e.event_minutes_item_id)}),e.next=10,Promise.all(c);case 10:return i=e.sent,o=i.map(function(e){return ke.selectRowById("minutes_item",e.minutes_item_id)}),e.next=14,Promise.all(o);case 14:return l=e.sent,u=i.map(function(e){return ke.selectRowById("event",e.event_id)}),e.next=18,Promise.all(u);case 18:return s=e.sent,e.next=21,ke.selectRowsAsArray("body");case 21:return m=e.sent,a.forEach(function(e,t){var r=i[t],a=l[t],c=s[t],o=m.find(function(e){return e.id===c.body_id}),u={id:e.id,matter:a.matter,name:a.name,voteForPerson:e.decision,decision:r.decision,eventId:r.event_id,index:r.index,eventDate:q.a.utc(c.event_datetime.toMillis()).toISOString(),body_name:o.name};n.push(u)}),p=Object(Re.orderBy)(n,["eventDate","index"],["desc","desc"]),e.abrupt("return",ot({},r,{votes:p}));case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}var pt=a.a.memo(function(e){var t=e.filters,n=e.handlePopupClose,r=e.sortByOptions,c=a.a.useRef(),i=a.a.useState([]),o=Object(D.a)(i,2),l=o[0],u=o[1],s=Object(D.a)(t,3),m=s[0],p=s[1],d=s[2],f=a.a.useState(""),h=Object(D.a)(f,2),v=h[0],b=h[1];return a.a.useEffect(function(){var e=!1;return function(){var t=Object(R.a)(_.a.mark(function t(){var n;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ke();case 2:n=t.sent,e||u(n);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}},[]),a.a.createElement(a.a.Fragment,null,a.a.createElement(le,{filter:m,header:"Select Committees",handlePopupClose:n,mountNodeRef:c},a.a.createElement(fe,{filter:m,options:l.map(function(e){return{name:e.id,text:e.name}}),searchCommitteeQuery:v,setSearchCommitteeQuery:b})),a.a.createElement(le,{filter:p,header:"Select Date Range",handlePopupClose:n,mountNodeRef:c},a.a.createElement(se,{filter:p})),a.a.createElement(le,{filter:d,header:"Select Sorting",handlePopupClose:n,mountNodeRef:c},a.a.createElement(Ce,{filter:d,sortByOptions:r})),a.a.createElement("div",{ref:c}))});var dt=function(e){a.a.useEffect(function(){return document.title=e,function(){document.title="Council Data Project - Seattle"}},[e])},ft=w.a.div({position:"sticky",top:"0",backgroundColor:"white",zIndex:"1",padding:"1em 0 2em","> .ui.button":{marginBottom:"0.5em","@media(max-width:500px)":{width:"100%"}}}),ht=w.a.span({display:"block",color:"grey",marginBottom:"2em"}),vt=w.a.span({color:"grey",fontWeight:"700",fontSize:"1.5em",marginTop:"1em"}),bt=w.a.div({paddingLeft:"1em"}),yt=function(e){e.query;var t=a.a.useState(!1),n=Object(D.a)(t,2),r=n[0],c=n[1],i=a.a.useState(!0),o=Object(D.a)(i,2),l=o[0],u=o[1],s=a.a.useState([]),m=Object(D.a)(s,2),p=m[0],d=m[1],f=re({start:"",end:""},"Date","",ue),h=re({},"Committee",!1,de),v=re({by:"",order:""},"Sort","",Se);dt("Committee Events"),a.a.useEffect(function(){var e=!1;return function(){var t=Object(R.a)(_.a.mark(function t(){var n;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ae();case 2:n=t.sent,e||(d(n),c(!0));case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}},[]);var b=a.a.useRef(),y=a.a.useRef(),E=a.a.useRef(),w=function(){var e=Object(R.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ne(b.current,h.value)&&ne(y.current,f.value)&&ne(E.current,v.value)){e.next=12;break}return window.scroll(0,0),u(!1),d([]),e.next=6,$e(f.value,ee(h.value),v.value);case 6:t=e.sent,d(t),b.current=h.value,y.current=f.value,E.current=v.value,u(!0);case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement(ft,null,a.a.createElement(pt,{filters:[h,f,v],handlePopupClose:w,sortByOptions:[{label:"Committee",value:"name"},{label:"Date",value:"date"}]})),a.a.createElement(bt,null,r&&l?a.a.createElement(ht,null,p.length," results"):a.a.createElement(vt,null,"Loading..."),a.a.createElement(J,{events:p})))},Et=function(e){var t=e.query,n=e.committeeFilterValue,r=e.start,c=e.end,i=e.sortBy,o=e.sortOrder,l=a.a.useState(!1),u=Object(D.a)(l,2),s=u[0],m=u[1],p=a.a.useState(t),d=Object(D.a)(p,2),f=d[0],h=d[1],v=a.a.useState([]),y=Object(D.a)(v,2),E=y[0],w=y[1],g=re({start:r,end:c},"Date","",ue),O=re(n,"Committee",!1,de),j=re({by:i,order:o},"Sort","",Se);dt("Search - ".concat(f));var x=Object(b.f)();a.a.useEffect(function(){var e=!1;return function(){var a=Object(R.a)(_.a.mark(function a(){var l;return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ge(t,{start:r,end:c},ee(n),{by:i,order:o});case 2:l=a.sent,e||(w(l),m(!0));case 4:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}()(),function(){e=!0}},[t,n,r,c,i,o]);var k=a.a.useRef(),S=a.a.useRef(),C=a.a.useRef(),P=a.a.useRef(t),I=function(){if(!ne(k.current,O.value)||!ne(S.current,g.value)||!ne(C.current,j.value)||P.current!==f){window.scroll(0,0),m(!1),w([]);var e=ee(O.value).join(","),t=g.value.start,n=g.value.end,r=j.value.by,a=j.value.order,c="/search?q=".concat(f);c+=e?"&ids=".concat(e):"",c+=t?"&from=".concat(t):"",c+=n?"&to=".concat(n):"",c+=r?"&sortBy=".concat(r):"",c+=a?"&sortOrder=".concat(a):"",k.current=O.value,S.current=g.value,C.current=j.value,P.current=f,x.replace(c)}};return a.a.createElement(a.a.Fragment,null,a.a.createElement(ft,{visible:!0},a.a.createElement(z.a,{onSubmit:function(e){e.preventDefault(),I()}},a.a.createElement(z.a.Group,{widths:"2"},a.a.createElement(z.a.Input,{placeholder:"Enter a keyword to search meeting transcripts",action:a.a.createElement(B.a,{type:"submit",primary:!0},"Search"),value:f,onChange:function(e,t){var n=t.value;h(n)}}))),a.a.createElement(pt,{filters:[O,g,j],handlePopupClose:I,sortByOptions:[{label:"Committee",value:"name"},{label:"Date",value:"date"},{label:"Relevance ",value:"value"}]})),a.a.createElement(bt,null,s?a.a.createElement(ht,null,E.length," results"):a.a.createElement(vt,null,"Loading..."),a.a.createElement(J,{events:E})))},wt=Object(w.a)(E.a)({minHeight:"100vh"}),gt=Object(w.a)(E.a)({marginTop:"2em !important",marginBottom:"5em !important"}),Ot=function(e){var t=e.location,n=F.a.parse(t.search),r=n.q,c=n.ids,i=n.from,o=n.to,l=n.sortBy,u=n.sortOrder,s={};return c&&c.split(",").forEach(function(e){return s[e]=!0}),a.a.createElement(wt,null,a.a.createElement(gt,null,a.a.createElement(Et,{query:r,committeeFilterValue:s,start:i||"",end:o||"",sortBy:l||"",sortOrder:u||""})))},jt=n(701),xt=n(76),kt=n(358),St=n.n(kt);var Ct=function(e){e=parseInt(e,10);var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=e-3600*t-60*n;return t<10&&(t="0"+t),n<10&&(n="0"+n),r<10&&(r="0"+r),t+":"+n+":"+r},Pt=w.a.div({display:"flex",flexWrap:"wrap",alignItems:"center",margin:"1em 0",padding:"0.2em"}),_t=w.a.div(function(e){return{width:e.isSearch?"100%":"85%",order:e.isSearch?"0":"1",boxSizing:"border-box",fontSize:"16px",lineHeight:"1.5em","@media(max-width:720px)":{width:"100%",order:"0"}}}),Rt=w.a.div(function(e){return{width:e.isSearch?"100%":"15%",order:e.isSearch?"1":"0",boxSizing:"border-box",padding:e.isSearch?"0":"0.5em","@media(max-width:720px)":{width:"100%",padding:"0",order:"1"}}}),Dt=a.a.memo(function(e){var t=e.searchText,n=e.transcript,r=e.handleSeek,c=e.isSearch,i=a.a.useRef(null),o=new xt.c({fixedWidth:!0,defaultHeight:100});a.a.useEffect(function(){var e=function(){i.current&&i.current.updatePosition()};return document.addEventListener("update-scroll-position",e),function(){document.removeEventListener("update-scroll-position",e)}},[]);var l=function(){o.clearAll()},u=function(e){var i=e.index,l=e.parent,u=e.key,s=e.style;return a.a.createElement(xt.b,{key:u,cache:o,parent:l,columnIndex:0,rowIndex:i},a.a.createElement("div",{style:s},a.a.createElement(Pt,null,a.a.createElement(Rt,{isSearch:c},a.a.createElement(B.a,{size:"tiny",onClick:function(){return r(n[i].start_time)}},a.a.createElement(Z.a,{name:"play"}),Ct(n[i].start_time))),a.a.createElement(_t,{isSearch:c},a.a.createElement(St.a,{searchWords:[t],autoEscape:!0,textToHighlight:n[i].text})))))};return c?a.a.createElement(xt.a,{onResize:l},function(e){var t=e.width,r=e.height;return a.a.createElement(xt.d,{deferredMeasurementCache:o,height:r,rowCount:n.length,rowHeight:o.rowHeight,rowRenderer:u,scrollToIndex:0,style:{willChange:""},width:t})}):a.a.createElement(xt.e,{ref:i},function(e){var t=e.height,r=e.isScrolling,c=e.onChildScroll,i=e.scrollTop;return a.a.createElement(xt.a,{disableHeight:!0,onResize:l},function(e){var l=e.width;return a.a.createElement(xt.d,{autoHeight:!0,deferredMeasurementCache:o,height:t,isScrolling:r,onScroll:c,rowCount:n.length,rowHeight:o.rowHeight,rowRenderer:u,scrollTop:i,style:{willChange:""},width:l})})})}),It=w.a.div({margin:"1em 0",width:"100%",display:"flex",flexDirection:"column",boxSizing:"border-box","@media (min-aspect-ratio:5/4), (min-width:1200px)":{width:"40%",margin:"0"}}),Bt=w.a.h2({width:"100%"}),At=Object(w.a)(I.a)({width:"100%",fontSize:"16px !important",lineHeight:"1.5 !important"}),Mt=w.a.span({display:"block",marginTop:"1em",color:"grey",paddingLeft:"15px"}),Tt=w.a.span({display:"block",marginTop:"1em",fontSize:"16px !important",lineHeight:"1.5 !important",paddingLeft:"15px"}),Yt=w.a.div({marginTop:"1em",border:"1px solid lightgray",borderRadius:"0.28rem",boxSizing:"border-box",minHeight:"calc(.5625 * 90vw)","@media (min-aspect-ratio:5/4), (min-width:1200px)":{flex:"1 1 auto",minHeight:"0"}}),Ht=function(e){var t=e.transcript,n=e.handleSeek,r=e.mediaQueriesMatches,c=a.a.useState(""),i=Object(D.a)(c,2),o=i[0],l=i[1],u=t.filter(function(e){var t=e.text;return me(t,o)});return a.a.createElement(It,null,a.a.createElement(Bt,null,"Search Transcript"),a.a.createElement(At,{onChange:function(e,t){var n=t.value;l(n),r||document.dispatchEvent(new CustomEvent("update-scroll-position"))},value:o,placeholder:"Search transcript"}),""!==o&&a.a.createElement(Mt,null,u.length," results"),""!==o&&u.length>0&&a.a.createElement(Yt,null,a.a.createElement(Dt,{searchText:o,transcript:u,handleSeek:n,isSearch:!0})),""===o&&a.a.createElement(Tt,null,"Enter a search term to get results."))},Nt=n(707),Ft=n(700),zt=w.a.ol({listStylePosition:"outside",paddingLeft:"1.5em"}),Ut=w.a.div({fontSize:"1em",fontWeight:"500"}),Lt=w.a.div({fontSize:"0.95em"}),qt=w.a.ul({listStylePosition:"outside",listStyleType:"disc",paddingLeft:"2em"}),Wt=function(e){var t=e.minutes,n=e.scPageUrl;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,"Minutes"),a.a.createElement(zt,null,t.map(function(e){var t=e.minutes_item;return a.a.createElement("li",{key:t.id},a.a.createElement(Ut,null,t.matter?t.matter:t.name),t.matter&&t.matter!==t.name&&a.a.createElement(Lt,null,t.name),t.file.length>0&&a.a.createElement(qt,null,t.file.map(function(e){var t=e.id,n=e.name,r=e.uri;return a.a.createElement("li",{key:t},a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:r},n))})))})),a.a.createElement("h3",null,"Links"),a.a.createElement("a",{href:n},"Seattle Channel Event Page"))},Qt=n(705),Vt=[{accessor:"matter",text:"Matter",width:"2"},{accessor:"decision",text:"Decision",width:"1"},{accessor:"name",text:"Name",width:"6"},{accessor:"votingRecords",text:"Vote",width:"5"}],Gt=Object(w.a)("div")({display:"flex"}),Jt=Object(w.a)("div")({width:"70%"}),Kt=Object(w.a)("div")({width:"30%"}),Zt=Object(w.a)(Qt.a.Header)({"@media(max-width:767px)":{display:"none !important"}}),$t=function(e){var t=e.votingData,n=e.isPerson;return a.a.createElement(Qt.a,{striped:!0},a.a.createElement(Zt,null,a.a.createElement(Qt.a.Row,null,Vt.map(function(e){return a.a.createElement(Qt.a.HeaderCell,{key:e.text},e.text)}),n&&a.a.createElement(Qt.a.HeaderCell,{key:"Event"},"Event"))),a.a.createElement(Qt.a.Body,null,t.map(function(e){return a.a.createElement(Qt.a.Row,{key:e.id},Vt.map(function(t){return"votingRecords"!==t.accessor?a.a.createElement(Qt.a.Cell,{key:t.accessor,width:t.width},e[t.accessor]):e.formattedIndividualVotes?a.a.createElement(Qt.a.Cell,{key:t.accessor,width:t.width},e.formattedIndividualVotes.map(function(e){return a.a.createElement(Gt,{key:e.full_name},a.a.createElement(Jt,null,a.a.createElement(v.b,{to:"/people/".concat(e.person_id)},e.full_name)),a.a.createElement(Kt,null,e.decision))})):a.a.createElement(a.a.Fragment,{key:t.accessor},a.a.createElement(Qt.a.Cell,{width:"1"},e.voteForPerson),a.a.createElement(Qt.a.Cell,null,a.a.createElement(v.b,{to:"/events/".concat(e.eventId)},a.a.createElement("span",null,e.body_name)),a.a.createElement("div",null,W(e.eventDate))))}))})))},Xt=w.a.div({margin:"1em 0",width:"100%",fontSize:"16px",lineHeight:"1.5","a.item":{fontSize:"1.3em !important"}}),en=Object(w.a)(Nt.a)({borderBottom:"0 !important",marginBottom:"1em !important",paddingTop:"1em !important",backgroundColor:"white !important",zIndex:"0 !important",width:"100%"}),tn=a.a.memo(function(e){var t=e.minutes,n=e.scPageUrl,r=e.transcript,c=e.votes,i=e.handleSeek,o=e.topOffset,l=e.mediaQueriesMatches,u=a.a.useState("details"),s=Object(D.a)(u,2),m=s[0],p=s[1],d=a.a.useRef(null);a.a.useEffect(function(){d.current.getBoundingClientRect().top<0&&(d.current.scrollIntoView(!0),l||window.scrollBy(0,-o))},[m,l,o]);var f=function(e,t){var n=t.name;p(n)};return a.a.createElement(Xt,{ref:d},a.a.createElement(Ft.a,{context:d,offset:o,styleElement:{zIndex:"1"}},a.a.createElement(en,{secondary:!0,pointing:!0},a.a.createElement(Nt.a.Item,{active:"details"===m,name:"details",onClick:f}),a.a.createElement(Nt.a.Item,{active:"transcript"===m,name:"transcript",onClick:f}),a.a.createElement(Nt.a.Item,{active:"votes"===m,name:"votes",onClick:f}))),{details:a.a.createElement(Wt,{minutes:t,scPageUrl:n}),transcript:a.a.createElement(Dt,{searchText:"",transcript:r,handleSeek:i,isSearch:!1}),votes:c.length?a.a.createElement($t,{votingData:c}):a.a.createElement("div",null,"No votes found for this event.")}[m])}),nn=n(360),rn=n.n(nn),an=w.a.div({display:"flex",flexWrap:"wrap",justifyContent:"space-between"}),cn=w.a.div({width:"100%",margin:"1em 0"}),on=w.a.h5({margin:"0.1em 0",color:"grey",fontWeight:"400"}),ln=w.a.div({position:"absolute",left:"0",right:"0",visibility:"hidden",height:"90px",backgroundColor:"yellow"}),un=w.a.div(function(e){return{position:"relative",display:"none","@media (min-aspect-ratio:5/4), (min-width:1200px)":{display:e.isFixed?"block":"none",width:"59%"}}}),sn=w.a.div({position:"absolute",top:"0",left:"0",backgroundColor:"black",height:"100%",width:"100%"}),mn=w.a.div(function(e){return{width:"100%",position:e.isPip?"relative":"sticky",top:"0",zIndex:"2","@media (min-aspect-ratio:5/4), (min-width:1200px)":{position:e.isFixed&&!e.isPip?"fixed":"relative",width:e.isFixed&&!e.isPip?"20vw":"59%",right:"0"}}}),pn=w.a.div({position:"relative",paddingTop:"56.25%"}),dn=Object(w.a)(rn.a)({position:"absolute",top:"0",left:"0"}),fn=function(e){e.id;var t=e.title,n=e.date,r=e.minutes,c=e.scPageUrl,i=e.videoUrl,o=e.transcript,l=e.votes,u=a.a.useRef(null),s=a.a.useRef(null),m=a.a.useState(!1),p=Object(D.a)(m,2),d=p[0],f=p[1],h=a.a.useState(!1),v=Object(D.a)(h,2),b=v[0],y=v[1],E=a.a.useState(window.matchMedia("(min-aspect-ratio:5/4), (min-width:1200px)").matches),w=Object(D.a)(E,2),g=w[0],O=w[1],j=a.a.useState(0),x=Object(D.a)(j,2),k=x[0],S=x[1];a.a.useEffect(function(){var e=new IntersectionObserver(function(e,t){g&&!d&&(e[0].intersectionRatio>=.1&&e[0].isIntersecting?y(!1):y(!0))},{root:null,rootMargin:"0px",threshold:.1});return e.observe(u.current),function(){e.disconnect()}},[d,g]),a.a.useEffect(function(){var e=s.current.getInternalPlayer(),t=function(){y(!1),f(!0)},n=function(){f(!1)};return e.addEventListener("enterpictureinpicture",t),e.addEventListener("leavepictureinpicture",n),function(){e.removeEventListener("enterpictureinpicture",t),e.removeEventListener("leavepictureinpicture",n)}},[]),a.a.useEffect(function(){var e=function(){var e=window.matchMedia("(min-aspect-ratio:5/4), (min-width:1200px)");e.matches?S(0):S(s.current.getInternalPlayer().offsetHeight),O(e.matches)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]);var C=function(e){s.current.seekTo(parseFloat(e));var t=s.current.getInternalPlayer();t.paused&&s.current.getCurrentTime()>0&&t.play()};return a.a.createElement(an,null,a.a.createElement(cn,null,a.a.createElement("h1",null,t),a.a.createElement(on,null,"Meeting Date: ",W(n))),a.a.createElement(ln,{ref:u}),a.a.createElement(un,{isFixed:b},a.a.createElement(pn,null,a.a.createElement(sn,null))),a.a.createElement(mn,{isPip:d,isFixed:b},a.a.createElement(pn,null,a.a.createElement(dn,{ref:s,url:i,onReady:function(){g||S(s.current.getInternalPlayer().offsetHeight)},controls:!0,height:"100%",width:"100%"}))),a.a.createElement(Ht,{transcript:o,handleSeek:C,mediaQueriesMatches:g}),a.a.createElement(tn,{minutes:r,scPageUrl:c,transcript:o,votes:l,handleSeek:C,topOffset:k,mediaQueriesMatches:g}))},hn=function(e){var t=e.id,n=a.a.useState(),r=Object(D.a)(n,2),c=r[0],i=r[1];return dt(c?"".concat(c.name," - ").concat(W(c.date)):"Loading..."),a.a.useEffect(function(){try{Object(R.a)(_.a.mark(function e(){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(t);case 2:n=e.sent,i(n);case 4:case"end":return e.stop()}},e)}))()}catch(e){}},[t]),c?a.a.createElement(fn,{id:t,title:c.name,date:c.date,description:c.description,scPageUrl:c.scPageUrl,videoUrl:c.videoUrl,minutes:c.minutes,transcript:c.transcript,votes:c.votes}):a.a.createElement(jt.a,{active:!0})},vn=Object(w.a)(E.a)({minHeight:"100vh"}),bn=Object(w.a)(E.a)({marginTop:"2em !important",marginBottom:"5em !important"}),yn=function(e){var t=e.match;return a.a.createElement(vn,null,a.a.createElement(bn,null,a.a.createElement(hn,{id:t.params.id})))},En=Object(w.a)(E.a)({minHeight:"100vh"}),wn=Object(w.a)(E.a)({marginTop:"2em !important",marginBottom:"5em !important"}),gn=function(){return a.a.createElement(En,null,a.a.createElement(wn,null,a.a.createElement("h2",null,"All Events"),a.a.createElement(yt,null)))},On=Object(w.a)("div")({display:"flex",flexWrap:"wrap"}),jn=Object(w.a)("div")({width:"250px",border:"1px solid #d4d4d5",boxShadow:"0 1px 3px 0 #d4d4d5",padding:"1.5rem",marginBottom:"1.5rem",borderRadius:"3px",marginRight:"2rem",cursor:"pointer",transition:".4s all",":hover":{transform:"scale(1.15)"}}),xn=Object(w.a)("h5")({fontWeight:600,fontSize:"1.2rem"}),kn=Object(b.g)(function(e){var t=e.people,n=e.history;return a.a.createElement(r.Fragment,null,a.a.createElement("h2",null,"Voting History"),a.a.createElement(On,null,t.map(function(e){var t=e.full_name,r=e.email,c=e.id;return a.a.createElement(jn,{key:t,onClick:function(){return n.push("/people/".concat(c))}},a.a.createElement(xn,null,t),a.a.createElement("p",null,"City Council Member"),a.a.createElement("a",{href:"mailto:".concat(r)},r))})))}),Sn=function(){var e=Object(r.useState)(null),t=Object(D.a)(e,2),n=t[0],c=t[1];return dt("City Council Members"),Object(r.useEffect)(function(){function e(){return(e=Object(R.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),n?a.a.createElement(kn,{people:n}):a.a.createElement(jt.a,{active:!0})},Cn=Object(w.a)(E.a)({minHeight:"100vh"}),Pn=Object(w.a)(E.a)({marginTop:"2em !important",marginBottom:"5em !important"}),_n=function(){return a.a.createElement(Cn,null,a.a.createElement(Pn,null,a.a.createElement(Sn,null)))},Rn=Object(w.a)("div")({display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"}),Dn=function(e){var t=e.personHistory,n=t.full_name,r=t.email,c=t.phone,i=t.website,o=t.votes;return a.a.createElement(Rn,null,a.a.createElement(U.a,{style:{padding:"1rem",width:"100%"}},a.a.createElement(U.a.Header,null,n),a.a.createElement("a",{href:"mailto:".concat(r)},r),a.a.createElement("div",null,c),a.a.createElement("div",null,"Website:",a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:i},i))),a.a.createElement($t,{votingData:o,isPerson:!0}))},In=Object(b.g)(function(e){var t=e.match.params.id,n=Object(r.useState)(null),c=Object(D.a)(n,2),i=c[0],o=c[1];return dt(i?i.full_name:"Loading..."),Object(r.useEffect)(function(){function e(){return(e=Object(R.a)(_.a.mark(function e(){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st(t);case 2:n=e.sent,o(n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t]),i?a.a.createElement(Dn,{personHistory:i}):a.a.createElement(jt.a,{active:!0})}),Bn=Object(w.a)(E.a)({minHeight:"100vh"}),An=Object(w.a)(E.a)({marginTop:"2em !important",marginBottom:"5em !important"}),Mn=function(){return a.a.createElement(Bn,null,a.a.createElement(An,null,a.a.createElement(In,null)))};o.a.initialize("UA-145893191-1");var Tn=function(){return a.a.createElement(v.a,{basename:"/"},a.a.createElement(j,null),a.a.createElement(b.c,null,a.a.createElement(b.a,{exact:!0,path:"/",component:h(H)}),a.a.createElement(b.a,{path:"/search",component:h(Ot)}),a.a.createElement(b.a,{exact:!0,path:"/events",component:h(gn)}),a.a.createElement(b.a,{path:"/events/:id",component:h(yn)}),a.a.createElement(b.a,{exact:!0,path:"/people",component:h(_n)}),a.a.createElement(b.a,{exact:!0,path:"/people/:id",component:h(Mn)})),a.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(Tn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[371,1,2]]]);
//# sourceMappingURL=main.8e6014bc.chunk.js.map