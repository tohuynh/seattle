(this["webpackJsonpcdp-frontend"]=this["webpackJsonpcdp-frontend"]||[]).push([[0],{488:function(e,t,a){e.exports=a(764)},493:function(e,t,a){},764:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getAllBodies",(function(){return Ne})),a.d(n,"getAllPeople",(function(){return Ze})),a.d(n,"getEventById",(function(){return Le})),a.d(n,"getEvents",(function(){return ye})),a.d(n,"getEventsByIndexedTerm",(function(){return Ue})),a.d(n,"getVotesForPerson",(function(){return Xe}));var r=a(0),c=a.n(r),i=a(60),o=a.n(i),l=(a(493),a(181)),u=a(100),s=a(134),m=a(255),p=a(254),d=a(33);function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=function(e){l.a.set(Object(d.a)({page:e},t)),l.a.pageview(e)},n=function(t){Object(m.a)(r,t);var n=Object(p.a)(r);function r(){return Object(u.a)(this,r),n.apply(this,arguments)}return Object(s.a)(r,[{key:"componentDidMount",value:function(){a(window.location.hash.substr(1))}},{key:"componentDidUpdate",value:function(e){var t=this.props.location.pathname,n=e.location.pathname;t!==n&&a(n)}},{key:"render",value:function(){return c.a.createElement(e,this.props)}}]),r}(r.Component);return n}var h=a(47),v=a(40),E=a(315),b=a(807),y=a(15),g=y.default.h1({}),w=Object(y.default)("span")({transition:".8s all",borderRadius:"5px",padding:"1rem .5rem",":hover":{backgroundColor:"#F5F5F5",color:"black"}}),O=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{vertical:!0},c.a.createElement(b.a,null,c.a.createElement(h.b,{to:"/"},c.a.createElement(g,null,"Council Data Project")))),c.a.createElement(E.a,{vertical:!0},c.a.createElement(b.a,null,c.a.createElement(h.b,{to:"/events"},c.a.createElement(w,null,"Events")),c.a.createElement(h.b,{to:"/people"},c.a.createElement(w,{style:{marginLeft:"10px"}},"People")))))},x=function(){return c.a.createElement(b.a,{style:{backgroundColor:"#ededf0",padding:"1em 1em",width:"100vw"}},c.a.createElement("p",null,"Support this project by",c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://forms.gle/eGyjhPx4hU3UBidKA",style:{textDecoration:"underline"}},"\xa0giving\xa0your\xa0feedback\xa0>")))},j=a(435),k=a(808),S=a(809),C=function(){return c.a.createElement(E.a,{inverted:!0,vertical:!0,style:{padding:"5em 0em"}},c.a.createElement(b.a,null,c.a.createElement(j.a,{inverted:!0,stackable:!0},c.a.createElement(j.a.Row,{columns:"equal"},c.a.createElement(j.a.Column,null,c.a.createElement(k.a,{inverted:!0,as:"h4",content:"About"}),c.a.createElement(S.a,{link:!0,inverted:!0},c.a.createElement(S.a.Item,{as:"a"},"The Project"),c.a.createElement(S.a.Item,{as:"a"},"The Team"),c.a.createElement(S.a.Item,{as:"a"},"Other Work"))),c.a.createElement(j.a.Column,null,c.a.createElement(k.a,{inverted:!0,as:"h4",content:"Seattle"}),c.a.createElement(S.a,{link:!0,inverted:!0},c.a.createElement(S.a.Item,{as:"a"},"City of Seattle"),c.a.createElement(S.a.Item,{as:"a"},"Seattle Open Data"),c.a.createElement(S.a.Item,{as:"a"},"Seattle Channel"))),c.a.createElement(j.a.Column,null,c.a.createElement(k.a,{inverted:!0,as:"h4",content:"Developers"}),c.a.createElement(S.a,{link:!0,inverted:!0},c.a.createElement(S.a.Item,{as:"a"},"Council Data Project"),c.a.createElement(S.a.Item,{as:"a"},"Seattle Specific"),c.a.createElement(S.a.Item,{as:"a"},"Transcription Runner")))),c.a.createElement(j.a.Row,null,c.a.createElement("p",null,"This web application is not funded by, nor associated with the Seattle City Council. This is a prototype web application to show the viability of an automated and collaborativly sourced city council transcription service. The transcripts are roughly ninty-percent accurate, and therefore may not represent what was actually said.")))))},_={margin:"2em"},I={marginTop:"0.7em",whiteSpace:"pre-wrap"},P={marginTop:"0.7em"},A=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={error:null,errorInfo:null},n}return Object(s.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?c.a.createElement("div",{style:_},c.a.createElement("h2",null,"Something went wrong."),c.a.createElement("div",null,"Sorry about that. To alert us of the issue, please fill out an"," ",c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/CouncilDataProject/seattle/issues"},"issue ticket")," ","and we will try to fix it as soon as we can."),c.a.createElement("br",null),c.a.createElement("div",null,this.state.error.toString()),c.a.createElement("details",{style:I},this.state.error.stack&&c.a.createElement("section",{style:P},c.a.createElement("strong",null,"Error Stack Trace"),c.a.createElement("br",null),c.a.createElement("span",null,this.state.error.stack)),c.a.createElement("section",{style:P},c.a.createElement("strong",null,"Component Stack Trace"),c.a.createElement("span",null,this.state.errorInfo.componentStack)))):this.props.children}}]),a}(c.a.Component),T=a(20),R=a.n(T),D=a(34),B=a(25),F=a(768),L=a(119),M=Object(y.default)(b.a)({minHeight:"55vh"}),U=Object(y.default)(b.a)({marginTop:"2em !important",marginBottom:"5em !important"}),q=Object(y.default)(F.a)({width:"50% !important"}),N=Object(y.default)(j.a)({display:"block",marginTop:"150px !important"}),H=function(e){var t=c.a.useState(""),a=Object(B.a)(t,2),n=a[0],r=a[1],i=function(){var e=Object(D.a)(R.a.mark((function e(t,a){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.value,r(n);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return c.a.createElement(M,null,c.a.createElement(U,null,c.a.createElement(A,null,c.a.createElement(N,{verticalAlign:"middle",centered:!0},c.a.createElement(j.a.Row,null,c.a.createElement("h1",null,"Search City Council Transcripts")),c.a.createElement(j.a.Row,null,c.a.createElement(q,{placeholder:"Enter a keyword to search meeting transcripts",value:n,onChange:i,onKeyPress:function(t){"Enter"===t.key&&e.history.push({pathname:"/search",search:"?q=".concat(n.trim().replace(/\s+/g,"+")),state:{query:n}})}}),c.a.createElement(L.a,{attached:"right",primary:!0,as:h.b,to:{pathname:"/search",search:"?q=".concat(n.trim().replace(/\s+/g,"+")),state:{query:n}}},"Search"))))))},z=a(249),V=a.n(z),W=a(812),Y=a(36),Q=a(815),G=function(e){var t=e.apiState,a=e.showLoader,n=void 0===a||a,i=e.children;if(t.isError)throw t.error instanceof Error?t.error:new Error(t.error);return t.isLoading?c.a.createElement(Q.a,{active:n}):t.data?c.a.createElement(r.Fragment,null,i):null},K=a(244),J=a(59),Z=a.n(J),$=function(e){return Z.a.utc(e).format("MMMM D, YYYY h:mm A")},X=Object(y.default)(K.a)({boxShadow:"none !important"}),ee=Object(y.default)(K.a.Content)({padding:"0 !important"}),te=function(e){var t=e.name,a=e.date,n=e.description,r=e.link,i=e.query;return c.a.createElement(X,{fluid:!0},c.a.createElement(ee,null,c.a.createElement(K.a.Header,null,c.a.createElement(h.b,{to:function(){var e=i?i.trim().replace(/\s+/g," "):"";return{pathname:r,search:e?"?q=".concat(e.replace(/\s+/g,"+")):"",state:{query:e}}}()},t)),c.a.createElement(K.a.Meta,null,$(a)),c.a.createElement(K.a.Description,null,n)))},ae=c.a.memo((function(e){var t=e.events,a=e.query;return c.a.createElement(K.a.Group,{centered:!0},t.map((function(e){var t=e.name,n=e.date,r=e.description,i=e.id;return c.a.createElement(te,{key:i,name:t,date:n,description:r,link:"/events/".concat(i),query:a})})))})),ne=c.a.memo((function(e){var t=e.allBodies,a=e.filters,n=e.handlePopupClose,i=e.sortOptions,o=Object(B.a)(a,3),l=o[0],u=o[1],s=o[2],m=Object(r.useState)(""),p=Object(B.a)(m,2),d=p[0],f=p[1],h=Object(r.useState)(!1),v=Object(B.a)(h,2),E=v[0],b=v[1];return Object(r.useEffect)((function(){return!s.popupIsOpen&&E&&n(),function(){return b(!1)}}),[E,s.popupIsOpen,n]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Y.FilterPopup,{clear:l.clear,getTextRep:l.getTextRep,isActive:l.isActive,header:"Select Committees",popupIsOpen:l.popupIsOpen,setPopupIsOpen:l.setPopupIsOpen,handlePopupClose:n,closeOnChange:!1},c.a.createElement(Y.SelectTextFilterOptions,{name:l.name,state:l.state,update:l.update,options:t.map((function(e){return{name:e.id,label:e.name,disabled:!1}})),optionQuery:d,setOptionQuery:f})),c.a.createElement(Y.FilterPopup,{clear:u.clear,getTextRep:u.getTextRep,isActive:u.isActive,header:"Select Date Range",popupIsOpen:u.popupIsOpen,setPopupIsOpen:u.setPopupIsOpen,handlePopupClose:n,closeOnChange:!1},c.a.createElement(Y.SelectDateRange,{state:u.state,update:u.update})),c.a.createElement(Y.FilterPopup,{clear:s.clear,getTextRep:s.getTextRep,isActive:s.isActive,header:"Sort Results By",popupIsOpen:s.popupIsOpen,setPopupIsOpen:s.setPopupIsOpen,handlePopupClose:n,closeOnChange:!0},c.a.createElement(Y.SelectSorting,{sortOptions:i,state:s.state,update:s.update,onPopupClose:function(){s.setPopupIsOpen(!1),b(!0)}})))})),re=a(141),ce=a(122),ie=a.n(ce),oe=(a(765),a(467)),le=a.n(oe),ue=a(50),se=a.n(ue);a(686);function me(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(D.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var de={eq:"==",contains:"array-contains",contains_any:"array-contains-any",in:"in",gt:">",lt:"<",gteq:">=",lteq:"<="},fe={asc:"asc",desc:"desc"},he=function e(t){Object(u.a)(this,e);var a=new Error("Unsure how to create WhereCondition from received data: ".concat(t));if(t instanceof Array)if(2===t.length)this.columnName=t[0],this.operator=de.eq,this.value=t[1];else{if(3!==t.length)throw a;if(!Object.values(de).includes(t[1]))throw new Error("\n                        Unknown WhereCondition operator: ".concat(t[1],"\n                        Allowed WhereCondition operators: ").concat(Object.values(de),"\n                    "));this.columnName=t[0],this.operator=t[1],this.value=t[2]}else{if(!(t instanceof Object))throw a;if(t.columnName&&t.operator&&t.value){if(!Object.values(de).includes(t.operator))throw new Error("\n                        Unknown WhereCondition operator: ".concat(t.operator,"\n                        Allowed WhereCondition operators: ").concat(Object.values(de),"\n                    "));this.columnName=t.columnName,this.operator=t.operator,this.value=t.value}else{if(!t.columnName||!t.value)throw a;this.columnName=t.columnName,this.operator=de.eq,this.value=t.value}}},ve=function e(t){Object(u.a)(this,e);var a,n=new Error("Unsure how to create OrderCondition from received data: ".concat(t));if("string"===typeof(a=t)||a instanceof String)this.columnName=t,this.operator=fe.desc;else if(t instanceof Array)if(1===t.length)this.columnName=t[0],this.operator=fe.desc;else{if(2!==t.length)throw n;if(!Object.values(fe).includes(t[1]))throw new Error("\n                        Unknown OrderCondition operator: ".concat(t[1],"\n                        Allowed OrderCondition operators: ").concat(Object.values(fe),"\n                    "));this.columnName=t[0],this.operator=t[1]}else{if(!(t instanceof Object))throw n;if(t.columnName&&t.operator){if(!Object.values(fe).includes(t.operator))throw new Error("\n                        Unknown OrderCondition operator: ".concat(t.operator,"\n                        Allowed OrderCondition operators: ").concat(Object.values(fe),"\n                    "));this.columnName=t.columnName,this.operator=t.operator}else{if(!t.columnName)throw n;this.columnName=t.columnName,this.operator=fe.desc}}},Ee=new(function(){function e(t){Object(u.a)(this,e),this.credentials=t,ie.a.initializeApp(this.credentials),this.connection=ie.a.firestore()}return Object(s.a)(e,[{key:"selectRowById",value:function(){var e=Object(D.a)(R.a.mark((function e(t,a){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.connection.collection(t).doc(a).get();case 3:if((n=e.sent).exists){e.next=6;break}throw new Error("".concat(t," ").concat(a," doesn't exist."));case 6:return e.abrupt("return",n.data());case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 12:case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"_unpackQueryResults",value:function(){var e=Object(D.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.forEach((function(e){var t=e.data(),n=Object(d.a)({id:e.id},t);a.push(n)})),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectRowsAsArray",value:function(){var e=Object(D.a)(R.a.mark((function e(t){var a,n,r,c,i,o=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:[],n=o.length>2&&void 0!==o[2]?o[2]:void 0,r=o.length>3&&void 0!==o[3]?o[3]:1e3,e.prev=3,c=this.connection.collection(t),a.forEach((function(e){c=c.where(e.columnName,e.operator,e.value)})),n&&(c=c.orderBy(n.columnName,n.operator)),c=c.limit(r),e.next=11,c.get().catch((function(e){throw new Error("Failed to retrieve data from database. Error: ".concat(e))}));case 11:return i=e.sent,e.next=14,this._unpackQueryResults(i);case 14:return e.abrupt("return",e.sent);case 17:return e.prev=17,e.t0=e.catch(3),e.abrupt("return",Promise.reject(e.t0));case 20:case 21:case"end":return e.stop()}}),e,this,[[3,17]])})));return function(t){return e.apply(this,arguments)}}()}]),e}())({apiKey:"AIzaSyA7aO6weBcOUBZLmxE3aMyn4NeElVEHZUc",authDomain:"cdp-sea.firebaseapp.com",projectId:"cdp-seattle",databaseURL:"https://cdp-sea.firebaseio.com"}),be=ie.a.storage();function ye(){return ge.apply(this,arguments)}function ge(){return(ge=Object(D.a)(R.a.mark((function e(){var t,a,n,r=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:null,a=r.length>1&&void 0!==r[1]?r[1]:null,n=r.length>2&&void 0!==r[2]?r[2]:null,t||a||n){e.next=9;break}return e.next=6,we();case 6:return e.abrupt("return",e.sent);case 9:return e.next=11,ze(t,a,n);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(D.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee.selectRowsAsArray("event",[],new ve(["event_datetime",fe.desc]));case 3:return t=e.sent,e.next=6,Qe(t);case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function xe(e,t){return je.apply(this,arguments)}function je(){return(je=Object(D.a)(R.a.mark((function e(t,a){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee.selectRowsAsArray("event_minutes_item",[new he(["event_id",de.eq,t])],new ve(["index",a]));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ke(e){return Se.apply(this,arguments)}function Se(){return(Se=Object(D.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee.selectRowById("minutes_item",t.minutes_item_id);case 3:return a=e.sent,e.next=6,Ee.selectRowsAsArray("minutes_item_file",[new he(["minutes_item_id",de.eq,t.minutes_item_id])],new ve(["name",fe.asc]));case 6:return n=e.sent,e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{minutes_item:Object(d.a)(Object(d.a)({id:t.minutes_item_id},a),{},{file:n})}));case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 13:case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Ce(e){return _e.apply(this,arguments)}function _e(){return(_e=Object(D.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee.selectRowById("body",t);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Ie(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(D.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ae(t);case 3:return a=e.sent,e.next=6,Re(a.file_id,me);case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Ae(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(D.a)(R.a.mark((function e(t){var a,n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.selectRowsAsArray("transcript",[new he(["event_id",de.eq,t])],null,1);case 2:if(a=e.sent,n=Object(B.a)(a,1),r=n[0]){e.next=7;break}throw new Error("Transcript doesn't exist for event: ".concat(t));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,t){return De.apply(this,arguments)}function De(){return(De=Object(D.a)(R.a.mark((function e(t,a){var n,r,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.selectRowById("file",t);case 2:return n=e.sent,r=be.refFromURL(n.uri),e.next=6,r.getDownloadURL().then((function(e){return a(e)}));case 6:if(c=e.sent){e.next=9;break}throw new Error("Failed to download ".concat(n.filename," from ").concat(n.uri,"."));case 9:return e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(D.a)(R.a.mark((function e(t){var a,n,r,c,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.filter((function(e){return null!==e.decision})),n=[],a.forEach((function(e){n.push({matter:e.minutes_item.matter,name:e.minutes_item.name,id:e.id,decision:e.decision,index:e.index})})),r=n.map((function(e){return Ee.selectRowsAsArray("vote",[new he(["event_minutes_item_id",de.eq,e.id])])})),e.next=7,Promise.all(r);case 7:return c=e.sent,e.next=10,Ee.selectRowsAsArray("person");case 10:return i=e.sent,n.forEach((function(e,t){var a=c[t],n=[];a.forEach((function(e){var t=i.find((function(t){return t.id===e.person_id}));n.push({decision:e.decision,person_id:e.person_id,full_name:t.full_name})})),e.formattedIndividualVotes=Object(ue.sortBy)(n,(function(e){return e.full_name}))})),e.abrupt("return",n);case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function Le(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(D.a)(R.a.mark((function e(t){var a,n,r,c,i,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee.selectRowById("event",t);case 3:return a=e.sent,e.next=6,Ce(a.body_id);case 6:return n=e.sent,e.next=9,xe(t,fe.asc);case 9:return r=e.sent,e.next=12,Promise.all(r.map((function(e){return ke(e)})));case 12:return c=e.sent,e.next=15,Ie(t);case 15:return i=e.sent,e.next=18,Be(c);case 18:return o=e.sent,e.abrupt("return",{id:t,name:n.name,description:n.description,videoUrl:a.video_uri,date:Z.a.utc(a.event_datetime.toMillis()).toISOString(),minutes:c,transcript:i,scPageUrl:a.source_uri,votes:o});case 22:return e.prev=22,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 25:case"end":return e.stop()}}),e,null,[[0,22]])})))).apply(this,arguments)}function Ue(e){return qe.apply(this,arguments)}function qe(){return(qe=Object(D.a)(R.a.mark((function e(t){var a,n,r,c,i,o,l,u,s,m=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=m.length>1&&void 0!==m[1]?m[1]:{},n=m.length>2&&void 0!==m[2]?m[2]:[],r=m.length>3&&void 0!==m[3]?m[3]:{},c=0,e.prev=4,0!==(i=t.split(" ").map((function(e){return le()(e)}))).length){e.next=8;break}return e.abrupt("return",[]);case 8:return e.next=10,Promise.all(i.map((function(e){return Ee.selectRowsAsArray("indexed_event_term",[new he(["term",de.eq,e])])})));case 10:return o=e.sent,l=Object(ue.mapValues)(Object(ue.groupBy)(Object(ue.flatten)(o),(function(e){return e.event_id})),(function(e,t){return e.reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),{},{value:e.value+t.value})}),{event_id:t,value:0})})),u=Object(ue.filter)(l,(function(e){return e.value>c})),e.next=15,Promise.all(u.map((function(e){var t=e.event_id;return Ee.selectRowById("event",t)})));case 15:return s=e.sent,e.next=18,Qe(s);case 18:return(s=e.sent).forEach((function(e,t){e.id=u[t].event_id,e.value=u[t].value})),s=Je(s=Ke(s,a,n),r,!0),e.abrupt("return",s);case 25:return e.prev=25,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0));case 28:case"end":return e.stop()}}),e,null,[[4,25]])})))).apply(this,arguments)}function Ne(){return He.apply(this,arguments)}function He(){return(He=Object(D.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",Ee.selectRowsAsArray("body",[],new ve(["name",fe.asc])));case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 7:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function ze(e,t,a){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(D.a)(R.a.mark((function e(t,a,n){var r,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=[],a.length?a.forEach((function(e){return r.push(We(t,e))})):r.push(We(t)),e.t0=ue.flatten,e.next=6,Promise.all(r);case 6:return e.t1=e.sent,c=(0,e.t0)(e.t1),e.next=10,Qe(c);case 10:return c=Je(c=e.sent,n),e.abrupt("return",c);case 15:return e.prev=15,e.t2=e.catch(0),e.abrupt("return",Promise.reject(e.t2));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function We(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(D.a)(R.a.mark((function e(t){var a,n,r,c,i,o,l=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:null,n=[],a&&n.push(new he(["body_id",de.eq,a])),t.start&&(r=Z.a.utc(t.start,"YYYY-MM-DD"),c=ie.a.firestore.Timestamp.fromMillis(r.valueOf()),n.push(new he(["event_datetime",de.gteq,c]))),t.end&&(i=Z.a.utc(t.end,"YYYY-MM-DD").add(1,"days").subtract(1,"milliseconds"),o=ie.a.firestore.Timestamp.fromMillis(i.valueOf()),n.push(new he(["event_datetime",de.lteq,o]))),e.abrupt("return",Ee.selectRowsAsArray("event",n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(D.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne();case 2:return a=e.sent,e.abrupt("return",t.map((function(e){var t=a.find((function(t){return t.id===e.body_id}));return{id:e.id,body_id:t.id,name:t.name,description:t.description,date:Z.a.utc(e.event_datetime.toMillis()).toISOString()}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e,t,a){return e.filter((function(e){if(a.length&&-1===a.indexOf(e.body_id))return!1;if(t.start&&Z.a.utc(e.date).isBefore(Z.a.utc(t.start)))return!1;if(t.end){var n=Z.a.utc(t.end,"YYYY-MM-DD").add(1,"days").subtract(1,"milliseconds");if(Z.a.utc(e.date).isAfter(n))return!1}return!0}))}function Je(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e=t.by&&t.order?Object(ue.orderBy)(e,[t.by],[t.order]):Object(ue.orderBy)(e,[a?"value":"date"],[fe.desc])}function Ze(){return $e.apply(this,arguments)}function $e(){return($e=Object(D.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee.selectRowsAsArray("person",[],new ve(["full_name",fe.asc]));case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Xe(e){return et.apply(this,arguments)}function et(){return(et=Object(D.a)(R.a.mark((function e(t){var a,n,r,c,i,o,l,u,s,m,p;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[],e.next=4,Ee.selectRowById("person",t);case 4:return n=e.sent,e.next=7,Ee.selectRowsAsArray("vote",[new he(["person_id",de.eq,t])]);case 7:return r=e.sent,c=r.map((function(e){return Ee.selectRowById("event_minutes_item",e.event_minutes_item_id)})),e.next=11,Promise.all(c);case 11:return i=e.sent,o=i.map((function(e){return Ee.selectRowById("minutes_item",e.minutes_item_id)})),e.next=15,Promise.all(o);case 15:return l=e.sent,u=i.map((function(e){return Ee.selectRowById("event",e.event_id)})),e.next=19,Promise.all(u);case 19:return s=e.sent,e.next=22,Ee.selectRowsAsArray("body");case 22:return m=e.sent,r.forEach((function(e,t){var n=i[t],r=l[t],c=s[t],o=m.find((function(e){return e.id===c.body_id})),u={id:e.id,matter:r.matter,name:r.name,voteForPerson:e.decision,decision:n.decision,eventId:n.event_id,index:n.index,eventDate:Z.a.utc(c.event_datetime.toMillis()).toISOString(),body_name:o.name};a.push(u)})),p=Object(ue.orderBy)(a,["eventDate","index"],["desc","desc"]),e.abrupt("return",Object(d.a)(Object(d.a)({},n),{},{votes:p}));case 28:return e.prev=28,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 31:case"end":return e.stop()}}),e,null,[[0,28]])})))).apply(this,arguments)}var tt=function(e,t){switch(t.type){case"FETCH_INIT":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!0,isError:!1});case"FETCH_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1,isError:!1,data:t.payload.data});case"FETCH_FAILURE":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1,isError:!0,error:t.payload.error});default:return e}},at=function(e,t,a){var c=Object(r.useState)(t),i=Object(B.a)(c,2),o=i[0],l=i[1],u=Object(r.useReducer)(tt,{isLoading:!1,isError:!1,error:null,data:a}),s=Object(B.a)(u,2),m=s[0],p=s[1];return Object(r.useEffect)((function(){var t=!1;return function(){var a=Object(D.a)(R.a.mark((function a(){var r;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(p({type:"FETCH_INIT"}),a.prev=1,!o){a.next=8;break}return a.next=5,n[e].apply(n,Object(re.a)(o));case 5:r=a.sent,a.next=11;break;case 8:return a.next=10,n[e]();case 10:r=a.sent;case 11:t||p({type:"FETCH_SUCCESS",payload:{data:r}}),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(1),t||p({type:"FETCH_FAILURE",payload:{error:a.t0}});case 17:case"end":return a.stop()}}),a,null,[[1,14]])})));return function(){return a.apply(this,arguments)}}()(),function(){t=!0}}),[e,o]),[m,l]},nt=function(e){var t=e.filters,a=e.handlePopupClose,n=e.sortOptions,r=at("getAllBodies",null,null),i=Object(B.a)(r,1)[0];return c.a.createElement(G,{showLoader:!1,apiState:i},c.a.createElement(ne,{allBodies:i.data,filters:t,handlePopupClose:a,sortOptions:n}))};var rt=function(e){c.a.useEffect((function(){return document.title=e,function(){document.title="Council Data Project - Seattle"}}),[e])},ct=y.default.div({position:"sticky",top:"0",backgroundColor:"white",zIndex:"1",padding:"1em 0 2em","> .ui.button":{marginBottom:"0.5em","@media(max-width:500px)":{width:"100%"}}}),it=y.default.span({display:"block",color:"grey",marginBottom:"2em"}),ot=y.default.div({paddingLeft:"1em"}),lt=function(e){e.query;var t=Object(Y.useFilter)("Date",{start:"",end:""},"",Y.getDateText),a=Object(Y.useFilter)("Committee",{},!1,Y.getCheckboxText),n=Object(Y.useFilter)("Sort",{by:"date",order:"desc",label:"Newest first"},"",Y.getSortingText),i=at("getEvents",null,null),o=Object(B.a)(i,2),l=o[0],u=o[1];rt("Committee Events");var s=c.a.useRef({}),m=c.a.useRef({}),p=c.a.useRef({}),d=Object(r.useCallback)((function(){a.isSameState(s.current)&&t.isSameState(m.current)&&n.isSameState(p.current)||(window.scroll(0,0),u((function(){var e=[t.state,Object(Y.getSelectedOptions)(a.state),n.state];return s.current=a.state,m.current=t.state,p.current=n.state,e})))}),[a,t,n,u]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(ct,null,c.a.createElement(nt,{filters:[a,t,n],handlePopupClose:d,sortOptions:[{by:"date",order:"desc",label:"Newest first"},{by:"date",order:"asc",label:"Oldest first"}]})),c.a.createElement(ot,null,c.a.createElement(G,{apiState:l},l.data&&c.a.createElement(it,null,l.data.length," results"),c.a.createElement(ae,{events:l.data}))))},ut=function(e){var t=e.query,a=c.a.useState(t),n=Object(B.a)(a,2),i=n[0],o=n[1],l=Object(Y.useFilter)("Date",{start:"",end:""},"",Y.getDateText),u=Object(Y.useFilter)("Committee",{},!1,Y.getCheckboxText),s=Object(Y.useFilter)("Sort",{by:"value",order:"desc",label:"Most relevant"},"",Y.getSortingText),m=at("getEventsByIndexedTerm",[t,l.state,Object(Y.getSelectedOptions)(u.state),s.state],null),p=Object(B.a)(m,2),d=p[0],f=p[1];rt("Search - ".concat(i));var h=Object(v.f)(),E=c.a.useRef({}),b=c.a.useRef({}),y=c.a.useRef({}),g=c.a.useRef(t),w=Object(r.useCallback)((function(){u.isSameState(E.current)&&l.isSameState(b.current)&&s.isSameState(y.current)&&g.current===i||(window.scroll(0,0),f((function(){var e=[i,l.state,Object(Y.getSelectedOptions)(u.state),s.state];return E.current=u.state,b.current=l.state,y.current=s.state,g.current=i,e})),h.replace({pathname:"/search",search:"?q=".concat(i.trim().replace(/\s+/g,"+"))}))}),[i,u,l,s,f,h]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(ct,null,c.a.createElement(W.a,{onSubmit:function(e){e.preventDefault(),w()}},c.a.createElement(W.a.Group,{widths:"2"},c.a.createElement(W.a.Input,{placeholder:"Enter a keyword to search meeting transcripts",action:c.a.createElement(L.a,{type:"submit",primary:!0},"Search"),value:i,onChange:function(e,t){var a=t.value;o(a)}}))),c.a.createElement(nt,{filters:[u,l,s],handlePopupClose:w,sortOptions:[{by:"value",order:"desc",label:"Most relevant"},{by:"date",order:"desc",label:"Newest first"},{by:"date",order:"asc",label:"Oldest first"}]})),c.a.createElement(ot,null,c.a.createElement(G,{apiState:d},d.data&&c.a.createElement(it,null,d.data.length," results"),c.a.createElement(ae,{events:d.data,query:g.current}))))},st=Object(y.default)(b.a)({minHeight:"100vh"}),mt=Object(y.default)(b.a)({marginTop:"2em !important",marginBottom:"5em !important"}),pt=function(e){var t=e.location,a=V.a.parse(t.search).q,n=a?a.trim().replace(/\+/g," "):"";return c.a.createElement(st,null,c.a.createElement(mt,null,c.a.createElement(A,null,c.a.createElement(ut,{query:n}))))},dt=a(55),ft=a(183),ht=a(472),vt=a.n(ht);var Et=function(e){e=parseInt(e,10);var t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),n=e-3600*t-60*a;return t<10&&(t="0"+t),a<10&&(a="0"+a),n<10&&(n="0"+n),t+":"+a+":"+n},bt=y.default.div({margin:"1em 0.2em"}),yt=y.default.div({fontSize:"16px",lineHeight:"1.5em"}),gt=y.default.div({marginTop:"10px",".ui.button":{padding:"0.8em !important"}}),wt=c.a.memo((function(e){var t=e.searchText,a=e.transcript,n=e.handleSeek,r=new ft.c({fixedWidth:!0,defaultHeight:100}),i=function(e){var i=e.index,o=e.parent,l=e.key,u=e.style;return c.a.createElement(ft.b,{key:l,cache:r,parent:o,columnIndex:0,rowIndex:i},c.a.createElement("div",{style:u},c.a.createElement(bt,null,c.a.createElement(yt,null,c.a.createElement(vt.a,{searchWords:[t],autoEscape:!0,textToHighlight:a[i].text})),c.a.createElement(gt,null,c.a.createElement(L.a,{size:"tiny",onClick:function(){return n(a[i].start_time)}},c.a.createElement(dt.a,{name:"play"}),Et(a[i].start_time))))))};return c.a.createElement(ft.a,{onResize:function(){r.clearAll()}},(function(e){var t=e.width,n=e.height;return c.a.createElement(ft.d,{deferredMeasurementCache:r,height:n,rowCount:a.length,rowHeight:r.rowHeight,rowRenderer:i,scrollToIndex:0,style:{willChange:""},width:t})}))})),Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return-1!==e.toLowerCase().indexOf(t.toLowerCase())},xt=y.default.div({margin:"1em 0",width:"100%",display:"flex",flexDirection:"column",boxSizing:"border-box","@media (min-aspect-ratio:5/4), (min-width:1200px)":{width:"38%",margin:"0 0 0 20px"}}),jt=y.default.h2({width:"100%"}),kt=Object(y.default)(F.a)({width:"100%",fontSize:"16px !important",lineHeight:"1.5 !important"}),St=y.default.span({display:"block",marginTop:"1em",color:"grey",paddingLeft:"15px"}),Ct=y.default.span({display:"block",marginTop:"1em",fontSize:"16px !important",lineHeight:"1.5 !important",paddingLeft:"15px"}),_t=y.default.div({marginTop:"1em",border:"1px solid lightgray",borderRadius:"0.28rem",boxSizing:"border-box",minHeight:"calc(.5625 * 90vw)","@media (min-aspect-ratio:5/4), (min-width:1200px)":{flex:"1 1 auto",minHeight:"0"}}),It=function(e){var t=e.transcript,a=e.handleSeek,n=e.query,r=c.a.useState(n),i=Object(B.a)(r,2),o=i[0],l=i[1],u=t.filter((function(e){var t=e.text;return Ot(t,o)}));return c.a.createElement(xt,null,c.a.createElement(jt,null,"Search Transcript"),c.a.createElement(kt,{onChange:function(e,t){var a=t.value;l(a)},value:o,placeholder:"Search transcript"}),""!==o&&c.a.createElement(St,null,u.length," results"),""!==o&&u.length>0&&c.a.createElement(_t,null,c.a.createElement(wt,{searchText:o,transcript:u,handleSeek:a})),""===o&&c.a.createElement(Ct,null,"Enter a search term to get results."))},Pt=a(819),At=a(74),Tt=Object(y.default)(F.a)((function(e){return{borderBottomColor:e.disabled?"white":"black",borderBottomStyle:"solid",borderBottomWidth:"1.5px",width:"10em"}})),Rt=Object(y.default)(Pt.a)({"i.close":{top:"0 !important",right:"0 !important",color:"black !important"}}),Dt=Object(r.forwardRef)((function(e,t){return c.a.createElement(At.a,{innerRef:t},c.a.createElement(L.a,e))})),Bt=Object(y.default)(Dt)({backgroundColor:"white !important","i.share":{paddingRight:"1.5em"}}),Ft=y.default.div({display:"inline-block"}),Lt=function(e){var t=e.trim().split(":").reverse(),a=0;return t.forEach((function(e,t){(e=e.trim())&&(isNaN(e)||e.includes("-")?a+=NaN:a+=parseFloat(e)*Math.pow(60,t))})),a&&(a=Math.floor(a)),a},Mt=function(e){if(isNaN(e))return"INVALID TIME POINT";e=Math.floor(parseFloat(e));var t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),n=e-3600*t-60*a;n<10&&(n="0".concat(n)),t>0&&a<10&&(a="0".concat(a));var r="".concat(a,":").concat(n);return t&&(r="".concat(t,":").concat(r)),r},Ut={value:"",isDisabled:!1,isActive:!1},qt=function(e,t){switch(t.type){case"UPDATE_VALUE":return Object(d.a)(Object(d.a)({},e),{},{value:t.payload.value});case"VALIDATE_VALUE":var a=Mt(Lt(e.value));return Object(d.a)(Object(d.a)({},e),{},{value:a});case"UPDATE_ISDISABLED":return Object(d.a)(Object(d.a)({},e),{},{isDisabled:t.payload.isDisabled});case"UPDATE_ISACTIVE":return Object(d.a)(Object(d.a)({},e),{},{isActive:t.payload.isActive});default:return e}},Nt=function(e){var t=e.videoPlayerRef,a=Object(r.useRef)(),n=Object(r.useRef)(),i=Object(r.useRef)(),o=Object(v.g)(),l=Object(r.useState)(!1),u=Object(B.a)(l,2),s=u[0],m=u[1],p=Object(r.useReducer)(qt,Ut),d=Object(B.a)(p,2),f=d[0],h=d[1],E=function(){h({type:"VALIDATE_VALUE"})};return c.a.createElement(r.Fragment,null,c.a.createElement(Rt,{closeIcon:!0,trigger:c.a.createElement(Bt,{compact:!0,icon:!0,onClick:function(){var e;if(t.current){var a=t.current.getState().player;e=4===a.readyState?a.currentTime:0}else e=0;h({type:"UPDATE_VALUE",payload:{value:Mt(e)}}),h({type:"UPDATE_ISDISABLED",payload:{isDisabled:!1}}),h({type:"UPDATE_ISACTIVE",payload:{isActive:!1}}),m(!0)}},c.a.createElement(dt.a,{name:"share"}),"SHARE"),open:s,onClose:function(){i.current.inputRef.current.removeEventListener("blur",E),m(!1)},mountNode:a.current,onMount:function(){i.current.inputRef.current.addEventListener("blur",E)},size:"small"},c.a.createElement(Pt.a.Header,null,"Share"),c.a.createElement(Pt.a.Content,null,c.a.createElement(F.a,{fluid:!0,action:c.a.createElement(L.a,{primary:!0,content:"Copy",onClick:function(){n.current.select(),document.execCommand("copy")}}),ref:n,value:function(){var e=Lt(f.value),t="".concat(document.location.href.split("#")[0],"#").concat(o.pathname);return f.isActive&&e?"".concat(t,"?t=").concat(e):"".concat(t)}()}),c.a.createElement("br",null),c.a.createElement(W.a,{onSubmit:E},c.a.createElement(W.a.Group,null,c.a.createElement(W.a.Checkbox,{label:"Start at",checked:f.isActive,onChange:function(e,t){var a=t.checked;h({type:"VALIDATE_VALUE"}),h({type:"UPDATE_ISDISABLED",payload:{isDisabled:!a}}),h({type:"UPDATE_ISACTIVE",payload:{isActive:a}})}}),c.a.createElement(Tt,{disabled:f.isDisabled,transparent:!0,value:f.value,onChange:function(e,t){var a=t.value;h({type:"UPDATE_VALUE",payload:{value:a}})},ref:i}))))),c.a.createElement(Ft,{ref:a}))},Ht=a(448),zt=a(816),Vt=y.default.ol({listStylePosition:"outside",paddingLeft:"1.5em"}),Wt=y.default.div({fontSize:"1em",fontWeight:"500"}),Yt=y.default.div({fontSize:"0.95em"}),Qt=y.default.ul({listStylePosition:"outside",listStyleType:"disc",paddingLeft:"2em"}),Gt=function(e){var t=e.minutes,a=e.scPageUrl;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"Minutes"),c.a.createElement(Vt,null,t.map((function(e){var t=e.minutes_item;return c.a.createElement("li",{key:t.id},c.a.createElement(Wt,null,t.matter?t.matter:t.name),t.matter&&t.matter!==t.name&&c.a.createElement(Yt,null,t.name),t.file.length>0&&c.a.createElement(Qt,null,t.file.map((function(e){var t=e.id,a=e.name,n=e.uri;return c.a.createElement("li",{key:t},c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:n},a))}))))}))),c.a.createElement("h3",null,"Links"),c.a.createElement("a",{href:a},"Seattle Channel Event Page"))},Kt=a(814),Jt=y.default.div((function(e){return{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",margin:e.isSpeakerTurnFormat?"2.5em 0.2em":"3em 0.2em"}})),Zt=y.default.div({width:"100%",fontSize:"16px",lineHeight:"1.5em","@media(min-width:1000px)":{width:"85%",order:"1"}}),$t=y.default.div({width:"100%",marginTop:"10px","@media(min-width:1000px)":{width:"15%",order:"0",marginTop:"0"}}),Xt=c.a.memo((function(e){var t=e.handleSeek,a=e.transcript,n=[];return a.format.includes("speaker-turns")?a.data.forEach((function(e){var t;e.data[0].speaker=e.speaker||"New Speaker",(t=n).push.apply(t,Object(re.a)(e.data))})):n=a.data,c.a.createElement("div",null,n.map((function(e){return function(e,t,a){return c.a.createElement("div",{key:e.start_time},!!e.speaker&&c.a.createElement(Kt.a,{horizontal:!0},c.a.createElement(k.a,{as:"h3"},e.speaker)),c.a.createElement(Jt,{isSpeakerTurnFormat:t},c.a.createElement(Zt,null,e.text),c.a.createElement($t,null,c.a.createElement(L.a,{size:"tiny",onClick:function(){return a(e.start_time)}},c.a.createElement(dt.a,{name:"play"}),Et(e.start_time)))))}(e,a.format.includes("speaker-turns"),t)})))})),ea=a(813),ta=[{accessor:"matter",text:"Matter",width:"2"},{accessor:"decision",text:"Decision",width:"1"},{accessor:"name",text:"Name",width:"6"},{accessor:"votingRecords",text:"Vote",width:"5"}],aa=Object(y.default)("div")({display:"flex"}),na=Object(y.default)("div")({width:"70%"}),ra=Object(y.default)("div")({width:"30%"}),ca=Object(y.default)(ea.a.Header)({"@media(max-width:767px)":{display:"none !important"}}),ia=function(e){var t=e.votingData,a=e.isPerson;return c.a.createElement(ea.a,{striped:!0},c.a.createElement(ca,null,c.a.createElement(ea.a.Row,null,ta.map((function(e){return c.a.createElement(ea.a.HeaderCell,{key:e.text},e.text)})),a&&c.a.createElement(ea.a.HeaderCell,{key:"Event"},"Event"))),c.a.createElement(ea.a.Body,null,t.map((function(e){return c.a.createElement(ea.a.Row,{key:e.id},ta.map((function(t){return"votingRecords"!==t.accessor?c.a.createElement(ea.a.Cell,{key:t.accessor,width:t.width},e[t.accessor]):e.formattedIndividualVotes?c.a.createElement(ea.a.Cell,{key:t.accessor,width:t.width},e.formattedIndividualVotes.map((function(e){return c.a.createElement(aa,{key:e.full_name},c.a.createElement(na,null,c.a.createElement(h.b,{to:"/people/".concat(e.person_id)},e.full_name)),c.a.createElement(ra,null,e.decision))}))):c.a.createElement(c.a.Fragment,{key:t.accessor},c.a.createElement(ea.a.Cell,{singleLine:!0},e.voteForPerson),c.a.createElement(ea.a.Cell,null,c.a.createElement(h.b,{to:"/events/".concat(e.eventId)},c.a.createElement("span",null,e.body_name)),c.a.createElement("div",null,$(e.eventDate))))})))}))))},oa=y.default.div({margin:"1em 0",width:"100%",fontSize:"16px",lineHeight:"1.5","a.item":{fontSize:"1.3em !important"}}),la=Object(y.default)(Ht.a)({borderBottom:"0 !important",marginBottom:"1em !important",paddingTop:"1em !important",backgroundColor:"white !important",zIndex:"0 !important",width:"100%"}),ua=c.a.memo((function(e){var t=e.minutes,a=e.scPageUrl,n=e.transcript,r=e.votes,i=e.handleSeek,o=e.topOffset,l=e.mediaQueriesMatches,u=c.a.useState("details"),s=Object(B.a)(u,2),m=s[0],p=s[1],d=c.a.useRef(null),f=function(e,t){var a=t.name;d.current.getBoundingClientRect().top<0&&(d.current.scrollIntoView(!0),l||window.scrollBy(0,-o)),p(a)};return c.a.createElement(oa,{ref:d},c.a.createElement(zt.a,{context:d,offset:o,styleElement:{zIndex:"1"}},c.a.createElement(la,{secondary:!0,pointing:!0},c.a.createElement(Ht.a.Item,{active:"details"===m,name:"details",onClick:f}),c.a.createElement(Ht.a.Item,{active:"transcript"===m,name:"transcript",onClick:f}),c.a.createElement(Ht.a.Item,{active:"votes"===m,name:"votes",onClick:f}))),{details:c.a.createElement(Gt,{minutes:t,scPageUrl:a}),transcript:c.a.createElement(Xt,{handleSeek:i,transcript:n}),votes:r.length?c.a.createElement(ia,{votingData:r}):c.a.createElement("div",null,"No votes found for this event.")}[m])})),sa=a(811),ma=a(145);var pa=function(e){var t=Object(r.useState)((function(){return matchMedia(e).matches})),a=Object(B.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)((function(){var t=matchMedia(e),a=function(e){c(e.matches)};return t.addListener(a),function(){t.removeListener(a)}}),[e]),n},da=(a(763),y.default.div({display:"flex",flexWrap:"wrap",justifyContent:"space-between"})),fa=y.default.div({width:"100%",margin:"1em 0"}),ha=y.default.span({margin:"0.1em 0",color:"grey",fontWeight:"400"}),va=Object(y.default)(E.a.Inline)({display:"flex",justifyContent:"space-between",width:"100%","@media (min-aspect-ratio:5/4), (min-width:1200px)":{width:"59%"}}),Ea=y.default.div({position:"absolute",left:"0",right:"0",visibility:"hidden",height:"90px",backgroundColor:"yellow"}),ba=y.default.div((function(e){return{position:"relative",display:"none","@media (min-aspect-ratio:5/4), (min-width:1200px)":{display:e.isFixed?"block":"none",width:"59%"}}})),ya=y.default.div({position:"absolute",top:"0",left:"0",backgroundColor:"black",height:"100%",width:"100%"}),ga=y.default.button((function(e){return{position:"absolute",top:"5px",right:"5px",opacity:"0.5",borderRadius:"50%",zIndex:10,visibility:e.isFixed?"visible":"hidden","&:hover":{opacity:.9}}})),wa=y.default.div((function(e){return{width:"100%",position:"sticky",top:"0",zIndex:"2","@media (min-aspect-ratio:5/4), (min-width:1200px)":{position:e.isFixed?"fixed":"relative",width:e.isFixed?"20vw":"59%",right:"0"}}})),Oa=y.default.div({position:"relative",paddingTop:"56.25%"}),xa=function(e){e.id;var t=e.eventData,a=e.query,n=e.videoTimePoint,r=t.name,i=t.date,o=t.minutes,l=t.scPageUrl,u=t.videoUrl,s=t.transcript,m=t.votes,p=c.a.useRef(null),d=c.a.useState(!1),f=Object(B.a)(d,2),h=f[0],v=f[1],b=pa("(min-aspect-ratio:5/4), (min-width:1200px)"),y=c.a.useState(0),g=Object(B.a)(y,2),w=g[0],O=g[1];c.a.useEffect((function(){var e=p.current.video.video;e.disablePictureInPicture=!0,O(e.offsetHeight)}),[]),c.a.useEffect((function(){var e=function(){var e=p.current.video.video;O(e.offsetHeight)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var x=function(e){p.current.seek(parseFloat(e));var t=p.current.getState().player;!t.paused&&t.hasStarted||p.current.play()};return c.a.createElement(da,null,c.a.createElement(fa,null,c.a.createElement("h1",null,r)),c.a.createElement(va,null,c.a.createElement(ha,null,$(i)),c.a.createElement(E.a.Inline,null,c.a.createElement(Nt,{videoPlayerRef:p}))),c.a.createElement(ba,{isFixed:h},c.a.createElement(Oa,null,c.a.createElement(ya,null))),c.a.createElement(wa,{isFixed:h},c.a.createElement(ga,{onClick:function(){v(!1),p.current.pause()},isFixed:h},"x"),c.a.createElement(ma.Player,{fluid:!0,aspectRatio:"16:9",preload:n?"auto":"metadata",ref:p,src:u,startTime:n},c.a.createElement(ma.BigPlayButton,{position:"center"}),c.a.createElement(ma.ControlBar,{autoHide:!0},c.a.createElement(ma.VolumeMenuButton,{vertical:!0}),c.a.createElement(ma.PlaybackRateMenuButton,{rates:[2,1.5,1,.75],order:6.1})))),c.a.createElement(sa.a,{once:!1,onBottomPassed:function(){b&&v(!0)},onBottomPassedReverse:function(){b&&v(!1)}},c.a.createElement(Ea,null)),c.a.createElement(It,{transcript:function(){if(s.format.includes("speaker-turns")){var e=[];return s.data.forEach((function(t){e.push.apply(e,Object(re.a)(t.data))})),e}return s.data}(),handleSeek:x,query:a}),c.a.createElement(ua,{minutes:o,scPageUrl:l,transcript:s,votes:m,handleSeek:x,topOffset:b?0:w,mediaQueriesMatches:b}))},ja=function(e){var t=e.id,a=e.query,n=e.videoTimePoint,r=at("getEventById",[t],null),i=Object(B.a)(r,1)[0];return rt(i.data?"".concat(i.data.name," - ").concat($(i.data.date)):"Loading..."),c.a.createElement(G,{apiState:i},c.a.createElement(xa,{id:t,eventData:i.data,query:a,videoTimePoint:n}))},ka=Object(y.default)(b.a)({minHeight:"100vh"}),Sa=Object(y.default)(b.a)({marginTop:"2em !important",marginBottom:"5em !important"}),Ca=function(e){var t=e.match,a=e.location,n=V.a.parse(a.search),r=n.q,i=n.t;return c.a.createElement(ka,null,c.a.createElement(Sa,null,c.a.createElement(A,null,c.a.createElement(ja,{id:t.params.id,query:function(){var e=r?r.trim().replace(/\+/g," "):"";return a.state&&(e=a.state.query||e),e}(),videoTimePoint:!i||isNaN(i)?0:Math.max(0,parseFloat(i))}))))},_a=Object(y.default)(b.a)({minHeight:"100vh"}),Ia=Object(y.default)(b.a)({marginTop:"2em !important",marginBottom:"5em !important"}),Pa=function(){return c.a.createElement(_a,null,c.a.createElement(Ia,null,c.a.createElement("h2",null,"All Events"),c.a.createElement(A,null,c.a.createElement(lt,null))))},Aa=Object(y.default)("div")({display:"flex",flexWrap:"wrap"}),Ta=Object(y.default)("div")({width:"250px",border:"1px solid #d4d4d5",boxShadow:"0 1px 3px 0 #d4d4d5",padding:"1.5rem",marginBottom:"1.5rem",borderRadius:"3px",marginRight:"2rem",cursor:"pointer",transition:".4s all",":hover":{transform:"scale(1.15)"}}),Ra=Object(y.default)("h5")({fontWeight:600,fontSize:"1.2rem"}),Da=Object(v.h)((function(e){var t=e.people,a=e.history;return c.a.createElement(r.Fragment,null,c.a.createElement("h2",null,"City Council Members"),c.a.createElement(Aa,null,t.map((function(e){var t=e.full_name,n=e.email,r=e.id;return c.a.createElement(Ta,{key:t,onClick:function(){return a.push("/people/".concat(r))}},c.a.createElement(Ra,null,t),c.a.createElement("p",null,"City Council Member"),c.a.createElement("a",{href:"mailto:".concat(n)},n))}))))})),Ba=function(){var e=at("getAllPeople",null,null),t=Object(B.a)(e,1)[0];return rt("City Council Members"),c.a.createElement(G,{apiState:t},c.a.createElement(Da,{people:t.data}))},Fa=Object(y.default)(b.a)({minHeight:"100vh"}),La=Object(y.default)(b.a)({marginTop:"2em !important",marginBottom:"5em !important"}),Ma=function(){return c.a.createElement(Fa,null,c.a.createElement(La,null,c.a.createElement(A,null,c.a.createElement(Ba,null))))},Ua=a(323),qa={marginRight:"0.5em"},Na=function(e){var t=e.personHistory,a=t.full_name,n=t.email,i=t.phone,o=t.website,l=t.votes,u=se.a.compact(se.a.uniq(l.map((function(e){return e.voteForPerson})))),s=Object(r.useState)([]),m=Object(B.a)(s,2),p=m[0],d=m[1],f=Object(r.useState)(l),h=Object(B.a)(f,2),v=h[0],b=h[1],y=function(e,t){var a=t.label,n=[];p.includes(a)?(n=se.a.without(p,a),d(n)):(p.push(a),d(n=p)),se.a.isEmpty(n)?b(l):b(se.a.filter(l,(function(e){return n.includes(e.voteForPerson)})))},g=u.map((function(e,t){return c.a.createElement(Ua.a,{style:qa,key:t,label:e,onChange:y})}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(k.a,{as:"h1"},a),c.a.createElement(j.a,{columns:1,stackable:!0},c.a.createElement(j.a.Column,null,c.a.createElement(E.a,null,c.a.createElement(k.a,{as:"h2"},"Contact information"),c.a.createElement("strong",null,"Email:")," ",c.a.createElement("a",{href:"mailto:".concat(n)},n),c.a.createElement("div",null,c.a.createElement("strong",null,"Phone:")," ",i),c.a.createElement("div",null,c.a.createElement("strong",null,"Website:")," ",c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o},o)))),c.a.createElement(j.a.Column,null,c.a.createElement(E.a,null,c.a.createElement(k.a,{as:"h2"},"Voting record"),c.a.createElement(k.a,{as:"h3"},"Filter by vote cast"),c.a.createElement(W.a,null,g),c.a.createElement(ia,{votingData:v,isPerson:!0})))))},Ha=Object(v.h)((function(e){var t=e.match.params.id,a=at("getVotesForPerson",[t],null),n=Object(B.a)(a,1)[0];return rt(n.data?n.data.full_name:"Loading..."),c.a.createElement(G,{apiState:n},c.a.createElement(Na,{personHistory:n.data}))})),za=Object(y.default)(b.a)({minHeight:"100vh"}),Va=Object(y.default)(b.a)({marginTop:"2em !important",marginBottom:"5em !important"}),Wa=function(){return c.a.createElement(za,null,c.a.createElement(Va,null,c.a.createElement(A,null,c.a.createElement(Ha,null))))};l.a.initialize("UA-145893191-1");var Ya=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(A,null,c.a.createElement(h.a,{basename:"/"},c.a.createElement(O,null),c.a.createElement(v.c,null,c.a.createElement(v.a,{exact:!0,path:"/",component:f(H)}),c.a.createElement(v.a,{path:"/search",component:f(pt)}),c.a.createElement(v.a,{exact:!0,path:"/events",component:f(Pa)}),c.a.createElement(v.a,{path:"/events/:id",component:f(Ca)}),c.a.createElement(v.a,{exact:!0,path:"/people",component:f(Ma)}),c.a.createElement(v.a,{exact:!0,path:"/people/:id",component:f(Wa)})),c.a.createElement(x,null),c.a.createElement(C,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(Ya,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[488,1,2]]]);
//# sourceMappingURL=main.f37838ba.chunk.js.map